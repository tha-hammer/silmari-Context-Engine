{
  "id": "901fb34b-2317-4c4e-9f75-16471cb7bdfa",
  "phase": "decomposition-complete",
  "timestamp": "2026-01-05T16:33:17.539921Z",
  "state": {
    "project_path": "/home/maceo/Dev/silmari-Context-Engine",
    "autonomy_mode": "checkpoint",
    "current_phase": "decomposition",
    "phase_results": {
      "research": {
        "phase_type": "research",
        "status": "complete",
        "artifacts": [
          "/home/maceo/Dev/silmari-Context-Engine/thoughts/searchable/research/2026-01-05-python-to-go-port-research.md"
        ],
        "errors": [],
        "started_at": "2026-01-05T15:47:53.417344",
        "completed_at": "2026-01-05T15:48:59.546383",
        "duration_seconds": 65.72521162033081,
        "metadata": {
          "cwa_entry_id": "research_0001",
          "open_questions": [
            "**Claude SDK for Go** - HTTP client implementation likely required",
            "**BAML Integration** - REST API or code generation options",
            "**Property-Based Testing** - gopter vs rapid library choice",
            "**Port Priority** - Go would be third parallel effort after TS/Rust"
          ],
          "output": "The research document already exists and is marked as **complete**. Let me provide you with a summary of what was found.\n\n---\n\n## \ud83d\udccb Research Summary: Python to Go Binary Port\n\nThe comprehensive research document covers how to port the **silmari-Context-Engine** (~13,000+ lines Python) to a Go binary for installation at `/usr/local/bin`.\n\n### Key Findings\n\n| Aspect | Current (Python) | Go Equivalent |\n|--------|-----------------|---------------|\n| **CLI Framework** | argparse | cobra |\n| **Data Models** | dataclasses | structs with validation |\n| **Subprocess** | subprocess | os/exec |\n| **Async** | asyncio | goroutines + channels |\n| **Testing** | pytest + hypothesis | testing + gopter/rapid |\n| **Distribution** | pip/venv | Single static binary |\n\n### Entry Points to Port\n\n| File | Lines | Purpose |\n|------|-------|---------|\n| `orchestrator.py` | 1,367 | Context-engineered agent orchestrator |\n| `loop-runner.py` | 1,382 | Autonomous loop runner |\n| `planning_pipeline/` | 18 files | 7-step pipeline module |\n\n### Installation Pattern\n\n```makefile\n# Build\ngo build -o bin/context-engine ./cmd/orchestrator\n\n# Install to /usr/local/bin\nsudo install -m 755 bin/context-engine /usr/local/bin/\n```\n\n### Cross-Compilation\n\n```bash\nGOOS=darwin GOARCH=arm64 go build -o context-engine-darwin-arm64 ./cmd/orchestrator\nGOOS=linux GOARCH=amd64 go build -o context-engine-linux-amd64 ./cmd/orchestrator\n```\n\n### Related Beads Issues\n\n- `silmari-Context-Engine-09ho` - TypeScript Port (15-week plan exists)\n- `silmari-Context-Engine-0lwl` - Rust Orchestrator Port (7-day plan exists)\n\n### Open Questions\n\n1. **Claude SDK for Go** - HTTP client implementation likely required\n2. **BAML Integration** - REST API or code generation options\n3. **Property-Based Testing** - gopter vs rapid library choice\n4. **Port Priority** - Go would be third parallel effort after TS/Rust\n\n---\n\nResearch saved to: thoughts/searchable/research/2026-01-05-python-to-go-port-research.md",
          "user_action": "continue"
        }
      },
      "decomposition": {
        "phase_type": "decomposition",
        "status": "complete",
        "artifacts": [
          "/home/maceo/Dev/silmari-Context-Engine/thoughts/searchable/research/2026-01-05-python-to-go-port-research.md"
        ],
        "errors": [],
        "started_at": "2026-01-05T16:10:59.633041",
        "completed_at": "2026-01-05T16:28:00.175976",
        "duration_seconds": 1020.542935,
        "metadata": {
          "cwa_entry_ids": [
            "req_0002",
            "req_0003",
            "req_0004",
            "req_0005",
            "req_0006",
            "req_0007",
            "req_0008",
            "req_0009",
            "req_0010",
            "req_0011",
            "req_0012",
            "req_0013",
            "req_0014",
            "req_0015",
            "req_0016",
            "req_0017",
            "req_0018",
            "req_0019",
            "req_0020",
            "req_0021",
            "req_0022",
            "req_0023",
            "req_0024",
            "req_0025",
            "req_0026",
            "req_0027",
            "req_0028",
            "req_0029",
            "req_0030",
            "req_0031",
            "req_0032",
            "req_0033",
            "req_0034",
            "req_0035",
            "req_0036",
            "req_0037",
            "req_0038",
            "req_0039",
            "req_0040",
            "req_0041",
            "req_0042",
            "req_0043",
            "req_0044",
            "req_0045",
            "req_0046",
            "req_0047",
            "req_0048",
            "req_0049",
            "req_0050",
            "req_0051",
            "req_0052",
            "req_0053",
            "req_0054",
            "req_0055",
            "req_0056",
            "req_0057",
            "req_0058",
            "req_0059",
            "req_0060",
            "req_0061",
            "req_0062",
            "req_0063",
            "req_0064",
            "req_0065",
            "req_0066",
            "req_0067",
            "req_0068",
            "req_0069",
            "req_0070",
            "req_0071"
          ],
          "hierarchy": {
            "requirements": [
              {
                "id": "REQ_000",
                "description": "The system must rewrite core Python logic in Go including subprocess management, JSON handling, and CLI parsing",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_000.1",
                    "description": "Port subprocess management using os/exec package",
                    "type": "sub_process",
                    "parent_id": "REQ_000",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Service.process",
                    "related_concepts": [],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_000.2",
                    "description": "Implement JSON parsing/serialization using encoding/json",
                    "type": "sub_process",
                    "parent_id": "REQ_000",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Service.implement",
                    "related_concepts": [],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_000.3",
                    "description": "Build CLI argument parsing using cobra framework",
                    "type": "sub_process",
                    "parent_id": "REQ_000",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Service.build",
                    "related_concepts": [],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_000.4",
                    "description": "Convert Python dataclasses to Go structs with validation methods",
                    "type": "sub_process",
                    "parent_id": "REQ_000",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Validator.convert",
                    "related_concepts": [],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_000.5",
                    "description": "Replace asyncio patterns with goroutines and channels",
                    "type": "sub_process",
                    "parent_id": "REQ_000",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Service.replace",
                    "related_concepts": [],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_001",
                "description": "The system must port two main CLI entry points (orchestrator and loop-runner) as separate Go binaries",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_001.1",
                    "description": "Create cmd/orchestrator/main.go entry point for context-engine binary",
                    "type": "sub_process",
                    "parent_id": "REQ_001",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Service.create",
                    "related_concepts": [],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_001.2",
                    "description": "Create cmd/loop-runner/main.go entry point for loop-runner binary",
                    "type": "sub_process",
                    "parent_id": "REQ_001",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Service.create",
                    "related_concepts": [],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_001.3",
                    "description": "Implement orchestrator.py logic (~1,367 lines) in Go",
                    "type": "sub_process",
                    "parent_id": "REQ_001",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Service.implement",
                    "related_concepts": [],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_001.4",
                    "description": "Implement loop-runner.py logic (~1,382 lines) in Go",
                    "type": "sub_process",
                    "parent_id": "REQ_001",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Service.implement",
                    "related_concepts": [],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_001.5",
                    "description": "Port planning_orchestrator.py (~500 lines) functionality",
                    "type": "sub_process",
                    "parent_id": "REQ_001",
                    "children": [],
                    "acceptance_criteria": [],
                    "implementation": null,
                    "testable_properties": [],
                    "function_id": "Service.port",
                    "related_concepts": [],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_002",
                "description": "The system must maintain external CLI tool integrations via os/exec subprocess calls",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_002.1",
                    "description": "Implement Claude CLI wrapper for running claude commands with configurable model, permissions, output format, and timeout support",
                    "type": "sub_process",
                    "parent_id": "REQ_002",
                    "children": [],
                    "acceptance_criteria": [
                      "MUST execute claude CLI with --print, --model, --permission-mode, and --output-format flags",
                      "MUST support configurable model selection (sonnet, opus) via function parameter",
                      "MUST support bypassPermissions mode for autonomous execution",
                      "MUST capture both stdout and stderr separately and return in result struct",
                      "MUST return CommandResult struct with Success (bool), Output (string), Error (string), Elapsed (time.Duration), and ReturnCode (int)",
                      "MUST handle command not found error with descriptive error message",
                      "MUST verify claude binary exists using exec.LookPath before execution",
                      "MUST support working directory parameter for project-specific execution",
                      "MUST support both text and JSON output formats",
                      "MUST implement streaming output variant using io.Pipe and bufio.Scanner for real-time output",
                      "MUST support prompt file reading (pass file path to claude CLI)",
                      "MUST write prompt to temp file (.agent/current-prompt.md) for interactive sessions"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create ClaudeRunner struct with ProjectPath, Model, and Timeout fields",
                        "Implement Execute(prompt string) (*CommandResult, error) method",
                        "Implement ExecuteWithFile(promptFile string) (*CommandResult, error) method",
                        "Implement ExecuteStreaming(prompt string) (<-chan string, error) method for real-time output",
                        "Create CommandResult struct with json tags for serialization",
                        "Implement ValidateClaudeInstalled() error helper method",
                        "Implement buildCommand(prompt string) *exec.Cmd helper for command construction"
                      ],
                      "middleware": [
                        "Implement context cancellation propagation for graceful shutdown",
                        "Add retry logic wrapper with configurable delay (default 5 seconds)"
                      ],
                      "shared": [
                        "Define CommandResult struct in internal/models/command.go",
                        "Define ClaudeConfig struct for configuration options",
                        "Define constants: DEFAULT_MODEL='sonnet', SESSION_TIMEOUT=3600"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "ClaudeRunner.Execute",
                    "related_concepts": [
                      "os/exec",
                      "context.WithTimeout",
                      "subprocess management",
                      "streaming output",
                      "JSON parsing",
                      "error handling"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_002.2",
                    "description": "Implement Git CLI wrapper for version control operations including status, add, commit, log, and diff with structured result parsing",
                    "type": "sub_process",
                    "parent_id": "REQ_002",
                    "children": [],
                    "acceptance_criteria": [
                      "MUST implement git status with parsed output (staged, unstaged, untracked files)",
                      "MUST implement git add with support for specific paths or all (-A flag)",
                      "MUST implement git commit with message parameter and support for heredoc-style messages",
                      "MUST implement git log with --oneline and --grep support for feature completion detection",
                      "MUST implement git diff for staged and unstaged changes",
                      "MUST implement git rev-parse HEAD for current commit hash retrieval",
                      "MUST implement git config for user.email and user.name verification",
                      "MUST return structured GitResult with Success, Output, and Error fields",
                      "MUST handle 'not a git repository' error gracefully with descriptive message",
                      "MUST support working directory specification for all operations",
                      "MUST implement IsFeatureInHistory(featureId string) bool method using git log --grep",
                      "MUST capture return code to distinguish between no matches (0) and errors (non-zero)"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create GitRunner struct with ProjectPath field",
                        "Implement Status() (*GitStatus, error) with parsed staged/unstaged/untracked slices",
                        "Implement Add(paths ...string) error with variadic path support",
                        "Implement AddAll() error for 'git add -A'",
                        "Implement Commit(message string) (*GitResult, error)",
                        "Implement Log(options LogOptions) ([]LogEntry, error) with grep and oneline support",
                        "Implement Diff(staged bool) (string, error) for getting diff output",
                        "Implement GetCurrentCommit() (string, error) using rev-parse HEAD",
                        "Implement IsFeatureInHistory(featureId string) bool for completion detection",
                        "Create runGit(args ...string) (*GitResult, error) internal helper"
                      ],
                      "middleware": [],
                      "shared": [
                        "Define GitResult struct with Success, Output, Error, ReturnCode fields",
                        "Define GitStatus struct with Staged, Unstaged, Untracked []string fields",
                        "Define LogEntry struct with Hash, Message, Author, Date fields",
                        "Define LogOptions struct with Grep, Oneline, MaxCount fields"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "GitRunner.Operations",
                    "related_concepts": [
                      "os/exec",
                      "git commands",
                      "version control",
                      "commit history",
                      "diff parsing",
                      "branch management"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_002.3",
                    "description": "Implement beads CLI (bd) wrapper for issue tracking with JSON output support, issue lifecycle management, and dependency tracking",
                    "type": "sub_process",
                    "parent_id": "REQ_002",
                    "children": [],
                    "acceptance_criteria": [
                      "MUST implement bd command execution with automatic --json flag appending",
                      "MUST implement CreateIssue(title, issueType, priority) with --title, --type, --priority flags",
                      "MUST implement CreateEpic(title, priority) as wrapper for CreateIssue with type='epic'",
                      "MUST implement ListIssues(status *string) with optional --status filter",
                      "MUST implement CloseIssue(issueId, reason *string) with optional --reason flag",
                      "MUST implement AddDependency(issueId, dependsOn) using 'bd dep add'",
                      "MUST implement Sync() for remote synchronization (without --json flag)",
                      "MUST implement GetReadyIssue(limit int) using 'bd ready --limit'",
                      "MUST implement UpdateStatus(issueId, status) using 'bd update --status'",
                      "MUST implement ShowIssue(issueId) for full issue details",
                      "MUST return BeadsResult with Success (bool), Data (interface{}), and Error (string)",
                      "MUST parse JSON response and return typed data when --json flag is used",
                      "MUST handle FileNotFoundError with 'bd command not found. Is beads installed?' message",
                      "MUST use default timeout of 30 seconds for beads operations",
                      "MUST handle JSON decode errors gracefully, falling back to raw string output"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create BeadsController struct with ProjectPath and Timeout fields",
                        "Implement runBd(useJson bool, args ...string) (*BeadsResult, error) internal method",
                        "Implement CreateIssue(title string, issueType string, priority int) (*BeadsResult, error)",
                        "Implement CreateEpic(title string, priority int) (*BeadsResult, error)",
                        "Implement ListIssues(status *string) (*BeadsResult, error)",
                        "Implement CloseIssue(issueId string, reason *string) (*BeadsResult, error)",
                        "Implement AddDependency(issueId, dependsOn string) (*BeadsResult, error)",
                        "Implement Sync() (*BeadsResult, error) with useJson=false",
                        "Implement GetReadyIssue(limit int) (*BeadsResult, error)",
                        "Implement UpdateStatus(issueId, status string) (*BeadsResult, error)",
                        "Implement ShowIssue(issueId string) (*BeadsResult, error)"
                      ],
                      "middleware": [],
                      "shared": [
                        "Define BeadsResult struct with Success bool, Data interface{}, Error string",
                        "Define BeadsIssue struct with ID, Title, Type, Status, Priority, Dependencies fields",
                        "Define constants: BEADS_DEFAULT_TIMEOUT=30, BEADS_CMD='bd'"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "BeadsController.Operations",
                    "related_concepts": [
                      "os/exec",
                      "issue tracking",
                      "JSON parsing",
                      "dependency management",
                      "status transitions",
                      "epic management"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_002.4",
                    "description": "Support build tool integrations for cargo, npm, pytest, go test, and make with auto-detection and configurable test commands",
                    "type": "sub_process",
                    "parent_id": "REQ_002",
                    "children": [],
                    "acceptance_criteria": [
                      "MUST implement RunTestCommand(cmd string) method that executes shell command via 'sh -c'",
                      "MUST support cargo test for Rust projects with verbose output parsing",
                      "MUST support npm test and npm run test for Node.js projects",
                      "MUST support pytest with -v flag for Python projects",
                      "MUST support go test ./... for Go projects",
                      "MUST support make test and arbitrary make targets",
                      "MUST detect test command from project files (Cargo.toml, package.json, pyproject.toml, go.mod, Makefile)",
                      "MUST return BuildResult with Passed (bool), Output (string), and ExitCode (int)",
                      "MUST handle missing test command gracefully returning (true, 'No test command detected, skipping')",
                      "MUST support working directory parameter for all build operations",
                      "MUST capture combined stdout/stderr for complete output",
                      "MUST support configurable timeout (default 300 seconds for tests)",
                      "MUST implement AutoDetectTestCommand() (string, error) based on project files"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create BuildRunner struct with ProjectPath and Timeout fields",
                        "Implement RunTestCommand(cmd string) (*BuildResult, error)",
                        "Implement RunCargo(args ...string) (*BuildResult, error) for Rust builds",
                        "Implement RunNpm(args ...string) (*BuildResult, error) for Node.js builds",
                        "Implement RunPytest(args ...string) (*BuildResult, error) for Python tests",
                        "Implement RunGoTest(packages ...string) (*BuildResult, error) for Go tests",
                        "Implement RunMake(target string) (*BuildResult, error) for Makefile targets",
                        "Implement AutoDetectTestCommand() (string, error) checking project files",
                        "Implement detectProjectType() (string, error) returning 'rust', 'node', 'python', 'go', 'make'"
                      ],
                      "middleware": [],
                      "shared": [
                        "Define BuildResult struct with Passed bool, Output string, ExitCode int, Elapsed time.Duration",
                        "Define ProjectType enum as string constants (ProjectTypeRust, ProjectTypeNode, etc.)",
                        "Define constants: BUILD_DEFAULT_TIMEOUT=300"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "BuildRunner.Execute",
                    "related_concepts": [
                      "os/exec",
                      "build tools",
                      "test runners",
                      "shell execution",
                      "exit codes",
                      "output parsing"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_002.5",
                    "description": "Handle command timeouts with default 1 hour for Claude sessions and configurable timeouts for other operations with graceful cancellation",
                    "type": "sub_process",
                    "parent_id": "REQ_002",
                    "children": [],
                    "acceptance_criteria": [
                      "MUST implement context.WithTimeout wrapper with configurable duration",
                      "MUST default to 1 hour (3600 seconds) timeout for Claude Code sessions",
                      "MUST default to 30 seconds for beads CLI operations",
                      "MUST default to 300 seconds (5 minutes) for build/test operations",
                      "MUST return TimeoutError type with elapsed duration when timeout occurs",
                      "MUST implement graceful cancellation using context.Context propagation",
                      "MUST support SIGINT/SIGTERM signal handling for process cleanup",
                      "MUST kill child processes when parent context is cancelled",
                      "MUST return partial output captured before timeout in error result",
                      "MUST implement WithRetry(attempts int, delay time.Duration) wrapper for transient failures",
                      "MUST log timeout events with command details for debugging",
                      "MUST support deadline extension for long-running operations via context refresh"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create TimeoutManager struct with DefaultTimeout time.Duration",
                        "Implement ExecuteWithTimeout(ctx context.Context, cmd *exec.Cmd, timeout time.Duration) (*CommandResult, error)",
                        "Implement WrapWithTimeout(timeout time.Duration) context.Context helper",
                        "Implement HandleTimeout(err error) *TimeoutError for error type assertion",
                        "Implement WithRetry(fn func() error, attempts int, delay time.Duration) error",
                        "Implement GracefulShutdown(cmd *exec.Cmd) error for clean process termination",
                        "Implement SetupSignalHandler(cancel context.CancelFunc) for SIGINT/SIGTERM handling"
                      ],
                      "middleware": [
                        "Create CommandMiddleware that wraps all subprocess calls with timeout context",
                        "Implement logging middleware for timeout events"
                      ],
                      "shared": [
                        "Define TimeoutError struct with Elapsed time.Duration, Command string, PartialOutput string",
                        "Define TimeoutConfig struct with ClaudeTimeout, BeadsTimeout, BuildTimeout fields",
                        "Define constants: CLAUDE_SESSION_TIMEOUT=3600, BEADS_TIMEOUT=30, BUILD_TIMEOUT=300, RETRY_DELAY=5"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "TimeoutManager.WithContext",
                    "related_concepts": [
                      "context.WithTimeout",
                      "context.WithCancel",
                      "graceful shutdown",
                      "signal handling",
                      "timeout recovery",
                      "process cleanup"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_003",
                "description": "The system must port the planning pipeline module with all 18 core files",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_003.1",
                    "description": "Port models.py to internal/models/ with RequirementNode, RequirementHierarchy, ImplementationComponents, and TestableProperty structs including validation, JSON serialization, and recursive tree operations",
                    "type": "sub_process",
                    "parent_id": "REQ_003",
                    "children": [],
                    "acceptance_criteria": [
                      "RequirementNode struct defined with all 12 fields: id, description, type, parent_id, children, acceptance_criteria, implementation, testable_properties, function_id, related_concepts, category",
                      "RequirementHierarchy struct with requirements slice and metadata map",
                      "ImplementationComponents struct with frontend, backend, middleware, shared string slices",
                      "TestableProperty struct with criterion, property_type, hypothesis_strategy, test_skeleton fields",
                      "VALID_REQUIREMENT_TYPES constant set: parent, sub_process, implementation",
                      "VALID_PROPERTY_TYPES constant set: invariant, round_trip, idempotence, oracle",
                      "VALID_CATEGORIES constant set: functional, non_functional, security, performance, usability, integration",
                      "Validate() method on RequirementNode checking type membership and non-empty description",
                      "ToDict()/MarshalJSON() methods for all structs with proper JSON tags",
                      "FromDict()/UnmarshalJSON() methods with recursive children reconstruction",
                      "RequirementHierarchy.AddRequirement() method to append top-level nodes",
                      "RequirementHierarchy.AddChild(parentID, child) method setting parent_id and appending to parent.children",
                      "RequirementHierarchy.GetByID(reqID) method with recursive depth-first search",
                      "RequirementHierarchy.NextChildID(parentID) method returning parent_id.N format",
                      "All optional fields use pointers (*string, *ImplementationComponents) with omitempty JSON tags",
                      "Unit tests achieving 100% coverage of all struct methods and validation logic",
                      "Property-based tests using gopter/rapid for serialization round-trips"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/models/requirement.go - RequirementNode struct with Validate(), ToDict(), FromDict()",
                        "internal/models/hierarchy.go - RequirementHierarchy struct with AddRequirement, AddChild, GetByID, NextChildID",
                        "internal/models/components.go - ImplementationComponents struct with ToDict(), FromDict()",
                        "internal/models/property.go - TestableProperty struct with ToDict(), FromDict()",
                        "internal/models/constants.go - VALID_REQUIREMENT_TYPES, VALID_PROPERTY_TYPES, VALID_CATEGORIES constants"
                      ],
                      "middleware": [
                        "Validation errors returned as custom error types with error codes"
                      ],
                      "shared": [
                        "internal/models/errors.go - ValidationError type for invalid requirement fields",
                        "internal/models/models_test.go - Unit tests for all structs and methods"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Models.PortDataStructures",
                    "related_concepts": [
                      "Go structs",
                      "JSON tags",
                      "encoding/json",
                      "pointer semantics",
                      "validation methods",
                      "recursive data structures",
                      "dataclass equivalents"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_003.2",
                    "description": "Port pipeline.py to internal/pipeline/pipeline.go implementing the PlanningPipeline orchestrator with 7-step execution flow, interactive checkpoints, retry loops, and result aggregation",
                    "type": "sub_process",
                    "parent_id": "REQ_003",
                    "children": [],
                    "acceptance_criteria": [
                      "PlanningPipeline struct with projectPath (string) and beads (*BeadsController) fields",
                      "NewPlanningPipeline(projectPath string) constructor returning *PlanningPipeline",
                      "Run(researchPrompt string, ticketID string, autoApprove bool) method returning PipelineResult struct",
                      "PipelineResult struct with Success bool, Steps map[string]StepResult, PlanDir string, EpicID string, FailedAt string, Error string",
                      "Step 1: Research phase with retry loop on revise/restart actions",
                      "Step 2: Memory sync calling silmari-oracle CLI and claude --print -p /clear",
                      "Step 3: Requirement decomposition with interactive retry/continue prompt",
                      "Step 4: Context generation with non-blocking failure handling",
                      "Step 5: Planning phase with feedback loop for Claude clarification",
                      "Step 6: Phase decomposition validating plan_path exists",
                      "Step 7: Beads integration creating epic and phase issues",
                      "Interactive checkpoint prompts using bufio.Scanner for user input",
                      "Progress output using fmt.Printf with section headers (=== separators)",
                      "Error handling writing checkpoints via checkpoint_manager on failure",
                      "Checkpoint cleanup on successful completion",
                      "All step functions called with project_path and appropriate inputs",
                      "Unit tests mocking step functions to test orchestration flow",
                      "Integration test running full pipeline with test fixtures"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/pipeline/pipeline.go - PlanningPipeline struct and Run() method",
                        "internal/pipeline/result.go - PipelineResult and StepResult structs",
                        "internal/pipeline/prompts.go - Interactive user prompt functions using bufio.Scanner"
                      ],
                      "middleware": [
                        "context.Context propagation for timeout/cancellation support",
                        "Error wrapping with pipeline phase context"
                      ],
                      "shared": [
                        "internal/pipeline/pipeline_test.go - Unit and integration tests"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Pipeline.PortOrchestrator",
                    "related_concepts": [
                      "Go structs",
                      "method receivers",
                      "error handling",
                      "context.Context",
                      "BeadsController integration",
                      "checkpoint management",
                      "interactive prompts"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_003.3",
                    "description": "Port steps.py implementing all 7 pipeline step functions: step_research, step_planning, step_phase_decomposition, step_beads_integration, step_memory_sync, and annotation helpers",
                    "type": "sub_process",
                    "parent_id": "REQ_003",
                    "children": [],
                    "acceptance_criteria": [
                      "StepResearch(projectPath, researchPrompt string) returning StepResult with research_path, output, open_questions",
                      "StepPlanning(projectPath, researchPath, additionalContext string) returning StepResult with plan_path, output",
                      "StepPhaseDecomposition(projectPath, planPath string) returning StepResult with phase_files slice",
                      "StepBeadsIntegration(projectPath string, phaseFiles []string, epicTitle string) returning StepResult with epic_id, phase_issues, files_annotated",
                      "StepMemorySync(projectPath, researchPath, sessionID string) returning StepResult with episode_recorded, context_compiled, context_cleared bools",
                      "Research step loads .claude/commands/research_codebase.md and injects research question",
                      "Planning step loads .claude/commands/create_tdd_plan.md with retry loop for clarification",
                      "Phase decomposition creates phase files with proper naming convention (YYYY-MM-DD-tdd-description-NN-*.md)",
                      "Beads integration separates overview file from phase files and creates dependency links",
                      "_annotateOverviewWithClaude helper adding bd commands to overview markdown",
                      "_annotatePhaseWithClaude helper adding tracking section to phase files",
                      "Memory sync calls silmari-oracle memory episode/compile and claude --print -p /clear via os/exec",
                      "Helper functions: ExtractFilePath, ExtractOpenQuestions, ExtractPhaseFiles for parsing Claude output",
                      "RunClaudeSync wrapper function for Claude CLI subprocess with timeout and streaming",
                      "All file operations using path/filepath.Join for cross-platform compatibility",
                      "Unit tests for each step function with mocked subprocess calls"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/pipeline/steps.go - All 5 step_* functions",
                        "internal/pipeline/annotation.go - _annotateOverviewWithClaude and _annotatePhaseWithClaude",
                        "internal/pipeline/helpers.go - ExtractFilePath, ExtractOpenQuestions, ExtractPhaseFiles",
                        "internal/runner/claude.go - RunClaudeSync wrapper for Claude CLI"
                      ],
                      "middleware": [
                        "Timeout handling using context.WithTimeout",
                        "Subprocess error capture and formatting"
                      ],
                      "shared": [
                        "internal/pipeline/steps_test.go - Unit tests for all step functions"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Steps.PortImplementations",
                    "related_concepts": [
                      "os/exec subprocess",
                      "Claude CLI wrapper",
                      "file I/O",
                      "path/filepath",
                      "template processing",
                      "BeadsController",
                      "markdown manipulation"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_003.4",
                    "description": "Port decomposition.py for requirement decomposition via Claude SDK including DecompositionConfig, DecompositionError, DecompositionStats, progress callbacks, BAML fallback, and function_id generation",
                    "type": "sub_process",
                    "parent_id": "REQ_003",
                    "children": [],
                    "acceptance_criteria": [
                      "DecompositionErrorCode enum with EMPTY_CONTENT, BAML_UNAVAILABLE, BAML_API_ERROR, INVALID_JSON, CONVERSION_ERROR, CLI_FALLBACK_ERROR",
                      "DecompositionError struct with Success bool, ErrorCode, Error string, Details map",
                      "DecompositionConfig struct with MaxSubProcesses, MinSubProcesses, IncludeAcceptanceCriteria, ExpandDimensions",
                      "DecompositionStats struct with RequirementsFound, SubprocessesExpanded, TotalNodes, ExtractionTimeMs, ExpansionTimeMs",
                      "DecomposeRequirements(content string, config *DecompositionConfig, progress ProgressCallback) returning (*RequirementHierarchy, error)",
                      "Progress callback type: func(message string)",
                      "Default progress callback printing to stdout with flush",
                      "Extraction prompt building with mandatory requirements section",
                      "JSON response parsing with _extractJSON helper (find first { to last })",
                      "Expansion loop calling Claude for each parent requirement",
                      "Implementation details conversion to RequirementNode children",
                      "GenerateFunctionID(description, parentID string) using _ACTION_MAP and _SUBJECT_PRIORITY",
                      "_ACTION_MAP constant: authenticate, login, logout, register, create, update, delete, get, fetch, retrieve, validate, verify, render, display, show, process, transform, calculate, send, receive, store, save, load",
                      "_SUBJECT_PRIORITY ordered list: authentication->Auth, validation->Validator, dashboard->Dashboard, data->Data, user->User, etc.",
                      "_processWithOllamaFallback for BAML ProcessGate1SubprocessDetailsPrompt",
                      "DecomposeRequirementsCliFallback using claude --print subprocess",
                      "_convertJSONToHierarchy building RequirementHierarchy from parsed JSON",
                      "Unit tests for DecomposeRequirements with mocked Claude responses",
                      "Unit tests for GenerateFunctionID with various input patterns"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/pipeline/decomposition.go - DecomposeRequirements main function",
                        "internal/pipeline/decomposition_types.go - Config, Error, Stats structs and ErrorCode enum",
                        "internal/pipeline/function_id.go - GenerateFunctionID with _ACTION_MAP and _SUBJECT_PRIORITY",
                        "internal/pipeline/decomposition_fallback.go - CLI fallback and Ollama fallback functions"
                      ],
                      "middleware": [
                        "HTTP client for Claude API if using REST instead of CLI",
                        "BAML client integration via REST API or generated code"
                      ],
                      "shared": [
                        "internal/pipeline/decomposition_test.go - Unit tests for all decomposition functions"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Decomposition.PortRequirementDecomposition",
                    "related_concepts": [
                      "Claude SDK API",
                      "JSON parsing",
                      "error types",
                      "progress callbacks",
                      "function_id generation",
                      "BAML integration",
                      "Ollama fallback"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_003.5",
                    "description": "Port checkpoint_manager.py for checkpoint persistence, recovery, age calculation, and cleanup operations supporting pipeline resume functionality",
                    "type": "sub_process",
                    "parent_id": "REQ_003",
                    "children": [],
                    "acceptance_criteria": [
                      "Checkpoint struct with ID, Phase, Timestamp, StateSnapshot, GitCommit, FilePath fields",
                      "StateSnapshot struct with Phase, ContextUsage float64, Artifacts []string, Errors []string",
                      "DetectResumableCheckpoint(projectPath string) returning (*Checkpoint, error)",
                      "Searches .workflow-checkpoints directory for *.json files",
                      "Returns most recent checkpoint sorted by timestamp descending",
                      "GetCheckpointAgeDays(checkpoint *Checkpoint) returning int",
                      "Handles ISO format timestamps with Z suffix conversion",
                      "CheckCheckpointCleanupNeeded(projectPath string, warnDays int) returning (bool, []Checkpoint)",
                      "Returns true if any checkpoint exceeds warnDays threshold",
                      "DeleteCheckpoint(checkpointPath string) returning bool",
                      "Uses os.Remove for file deletion with error handling",
                      "CleanupCheckpointsByAge(checkpoints []Checkpoint, daysToDelete int) returning (deleted, failed int)",
                      "CleanupAllCheckpoints(projectPath string) returning (deleted, failed int)",
                      "WriteCheckpoint(projectPath, phase string, artifacts []string, errors []string) returning string path",
                      "Creates .workflow-checkpoints directory if not exists",
                      "Generates UUID using github.com/google/uuid",
                      "Gets current git commit via git rev-parse HEAD subprocess",
                      "Writes JSON with proper timestamp format (ISO + Z suffix)",
                      "Unit tests for all checkpoint operations with temp directory fixtures",
                      "Test coverage for edge cases: missing directory, invalid JSON, corrupt timestamps"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/pipeline/checkpoint_manager.go - All checkpoint functions",
                        "internal/pipeline/checkpoint_types.go - Checkpoint and StateSnapshot structs"
                      ],
                      "middleware": [
                        "File locking for concurrent checkpoint access if needed"
                      ],
                      "shared": [
                        "internal/pipeline/checkpoint_manager_test.go - Unit tests with temp directory fixtures"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Checkpoint.PortCheckpointManager",
                    "related_concepts": [
                      "JSON file I/O",
                      "path/filepath",
                      "time package",
                      "os operations",
                      "git subprocess",
                      "UUID generation"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_004",
                "description": "The system must implement Go CLI using cobra framework with all existing Python argparse flags",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_004.1",
                    "description": "Implement --project/-p flag for specifying an existing project path to continue working on",
                    "type": "sub_process",
                    "parent_id": "REQ_004",
                    "children": [],
                    "acceptance_criteria": [
                      "Flag is registered with both long form '--project' and short form '-p'",
                      "Flag accepts a string value representing a file system path",
                      "Flag is optional (not required for command execution)",
                      "Path value is validated to ensure it exists and is a directory",
                      "Path is converted to absolute path if relative path is provided",
                      "Flag value is accessible via cobra's flag binding mechanism",
                      "Help text displays: 'Project path to continue'",
                      "Empty string is accepted as valid (no project specified)",
                      "Error message is displayed if path does not exist when flag is provided",
                      "Flag conflicts appropriately with --new flag (mutually exclusive)"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Define projectPath variable as string in cmd package",
                        "Register flag using rootCmd.Flags().StringVarP(&projectPath, 'project', 'p', '', 'Project path to continue')",
                        "Implement path validation function validateProjectPath(path string) error",
                        "Implement path normalization function to convert relative to absolute paths",
                        "Add pre-run validation hook to verify project directory exists if flag is provided"
                      ],
                      "middleware": [
                        "Implement mutual exclusivity check between --project and --new flags",
                        "Add flag validation middleware in PersistentPreRunE"
                      ],
                      "shared": [
                        "Define ProjectConfig struct with ProjectPath field",
                        "Create path utility functions in internal/cli/paths.go",
                        "Define custom error types for invalid project path scenarios"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "cmd.rootCmd.projectFlag",
                    "related_concepts": [
                      "cobra flags",
                      "path validation",
                      "project state persistence",
                      "CLI argument parsing",
                      "file system access"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_004.2",
                    "description": "Implement --new flag for creating a new project at a specified path location",
                    "type": "sub_process",
                    "parent_id": "REQ_004",
                    "children": [],
                    "acceptance_criteria": [
                      "Flag is registered with long form '--new' only (no short form)",
                      "Flag accepts a string value representing a file system path for new project",
                      "Flag is optional (not required for command execution)",
                      "Parent directory of specified path must exist",
                      "Path must not already exist as a file (directory may exist if empty)",
                      "Flag value triggers project initialization workflow when provided",
                      "Help text displays: 'Create new project at path'",
                      "Error is raised if path already exists and contains files",
                      "Flag is mutually exclusive with --project/-p flag",
                      "New project directory is created with proper permissions (0755)"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Define newPath variable as string in cmd package",
                        "Register flag using rootCmd.Flags().StringVar(&newPath, 'new', '', 'Create new project at path')",
                        "Implement validateNewProjectPath(path string) error function",
                        "Implement createProjectDirectory(path string) error function",
                        "Add project initialization logic that creates required subdirectories",
                        "Implement project state file creation at new path"
                      ],
                      "middleware": [
                        "Add mutual exclusivity validation with --project flag in PersistentPreRunE",
                        "Implement permission check for parent directory write access"
                      ],
                      "shared": [
                        "Extend ProjectConfig struct with NewProjectPath field",
                        "Define ProjectInitOptions struct for initialization parameters",
                        "Create directory utility functions in internal/cli/filesystem.go",
                        "Define error types: ErrPathExists, ErrParentNotExists, ErrNoWritePermission"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "cmd.rootCmd.newFlag",
                    "related_concepts": [
                      "cobra flags",
                      "directory creation",
                      "project initialization",
                      "file system operations",
                      "project scaffolding"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_004.3",
                    "description": "Implement --model/-m flag for selecting the Claude model with 'sonnet' as default and 'opus' as alternative option",
                    "type": "sub_process",
                    "parent_id": "REQ_004",
                    "children": [],
                    "acceptance_criteria": [
                      "Flag is registered with both long form '--model' and short form '-m'",
                      "Flag accepts string values limited to: 'sonnet', 'opus'",
                      "Default value is 'sonnet' when flag is not provided",
                      "Help text displays: 'Model (sonnet/opus)'",
                      "Invalid model values produce clear error message listing valid options",
                      "Flag value is case-insensitive (SONNET, Sonnet, sonnet all valid)",
                      "Model value is normalized to lowercase before use",
                      "Flag value is passed correctly to Claude CLI subprocess calls",
                      "Model selection is logged/displayed when debug mode is enabled"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Define model variable as string with default 'sonnet' in cmd package",
                        "Register flag using rootCmd.Flags().StringVarP(&model, 'model', 'm', 'sonnet', 'Model (sonnet/opus)')",
                        "Define ValidModels constant slice: []string{'sonnet', 'opus'}",
                        "Implement validateModel(model string) error function with case normalization",
                        "Implement isValidModel(model string) bool helper function",
                        "Add model validation in PersistentPreRunE hook"
                      ],
                      "middleware": [
                        "Implement model validation middleware that runs before command execution",
                        "Add model value normalization (lowercase conversion)"
                      ],
                      "shared": [
                        "Define ModelType as custom string type with validation",
                        "Define Model constants: ModelSonnet = 'sonnet', ModelOpus = 'opus'",
                        "Create models package in internal/models/claude.go",
                        "Define ErrInvalidModel error type with valid options in message"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "cmd.rootCmd.modelFlag",
                    "related_concepts": [
                      "cobra flags",
                      "enum validation",
                      "default values",
                      "Claude API models",
                      "model configuration"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_004.4",
                    "description": "Implement --max-sessions flag for limiting the maximum number of Claude sessions with default value of 100",
                    "type": "sub_process",
                    "parent_id": "REQ_004",
                    "children": [],
                    "acceptance_criteria": [
                      "Flag is registered with long form '--max-sessions' only (no short form)",
                      "Flag accepts integer values",
                      "Default value is 100 when flag is not provided",
                      "Help text displays: 'Max sessions' or 'Maximum number of sessions'",
                      "Minimum valid value is 1 (zero or negative values rejected)",
                      "Maximum valid value is reasonable (e.g., 10000) to prevent resource exhaustion",
                      "Non-integer values produce clear parse error message",
                      "Value is used to control loop iteration limit in orchestrator",
                      "Current session count is tracked and compared against max-sessions limit"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Define maxSessions variable as int with default 100 in cmd package",
                        "Register flag using rootCmd.Flags().IntVar(&maxSessions, 'max-sessions', 100, 'Max sessions')",
                        "Implement validateMaxSessions(count int) error function",
                        "Define MinSessions constant = 1",
                        "Define MaxSessionsLimit constant = 10000",
                        "Add session counter in orchestrator loop logic",
                        "Implement session limit check that terminates loop gracefully"
                      ],
                      "middleware": [
                        "Add max-sessions validation in PersistentPreRunE",
                        "Implement bounds checking middleware for integer flag values"
                      ],
                      "shared": [
                        "Define SessionConfig struct with MaxSessions field",
                        "Define SessionLimits struct with Min, Max, Default fields",
                        "Create session tracking types in internal/models/session.go",
                        "Define ErrSessionLimitExceeded, ErrInvalidSessionLimit error types"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "cmd.rootCmd.maxSessionsFlag",
                    "related_concepts": [
                      "cobra flags",
                      "integer validation",
                      "session management",
                      "resource limits",
                      "loop control"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_004.5",
                    "description": "Implement --continue/-c boolean flag for continuing an existing project session",
                    "type": "sub_process",
                    "parent_id": "REQ_004",
                    "children": [],
                    "acceptance_criteria": [
                      "Flag is registered with both long form '--continue' and short form '-c'",
                      "Flag is boolean type (no value required, presence sets true)",
                      "Default value is false when flag is not provided",
                      "Help text displays: 'Continue existing project'",
                      "Flag triggers continuation logic to restore previous session state",
                      "Requires --project flag to be set (or uses current directory)",
                      "Error if continue is set but no valid project state file exists",
                      "Continuation loads checkpoint data from project state files",
                      "Session history is preserved when continuing",
                      "Feature list progress is restored from last checkpoint"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Define continueFlag variable as bool with default false in cmd package",
                        "Register flag using rootCmd.Flags().BoolVarP(&continueFlag, 'continue', 'c', false, 'Continue existing project')",
                        "Implement loadProjectState(projectPath string) (*ProjectState, error)",
                        "Implement validateContinuation(projectPath string, continueFlag bool) error",
                        "Create checkpoint loading logic in internal/pipeline/checkpoint.go",
                        "Implement state file discovery function findStateFile(projectPath string) (string, error)",
                        "Add continuation mode indicator in orchestrator output"
                      ],
                      "middleware": [
                        "Add validation that --continue requires valid project path (explicit or current directory)",
                        "Implement state file existence check in PersistentPreRunE when continue flag is set"
                      ],
                      "shared": [
                        "Define ProjectState struct with checkpoint data fields",
                        "Define ContinuationConfig struct with required continuation parameters",
                        "Create state file schema in internal/models/state.go",
                        "Define ErrNoStateFile, ErrCorruptedState, ErrIncompatibleVersion error types",
                        "Define StateFileVersion constant for compatibility checking"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "cmd.rootCmd.continueFlag",
                    "related_concepts": [
                      "cobra flags",
                      "boolean flags",
                      "session continuation",
                      "state recovery",
                      "checkpoint restoration"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_005",
                "description": "The system must support installation to /usr/local/bin via Makefile and install script",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_005.1",
                    "description": "Create Makefile with build target that compiles both context-engine and loop-runner Go binaries with version embedding via ldflags",
                    "type": "sub_process",
                    "parent_id": "REQ_005",
                    "children": [],
                    "acceptance_criteria": [
                      "Makefile defines BINARY_NAME=context-engine and LOOP_BINARY=loop-runner variables",
                      "VERSION variable is populated from git describe --tags --always --dirty",
                      "LDFLAGS variable injects version into main.version via -X flag",
                      "build target compiles ./cmd/orchestrator to bin/$(BINARY_NAME)",
                      "build target compiles ./cmd/loop-runner to bin/$(LOOP_BINARY)",
                      "Running 'make build' produces two executables in bin/ directory",
                      "Built binaries report correct version when run with --version flag",
                      "Build fails gracefully with clear error if Go is not installed",
                      "Build target is marked as .PHONY to always rebuild",
                      "Optional CGO_ENABLED=0 support for fully static binaries"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Define Makefile variable BINARY_NAME=context-engine",
                        "Define Makefile variable LOOP_BINARY=loop-runner",
                        "Define VERSION variable: VERSION ?= $(shell git describe --tags --always --dirty)",
                        "Define LDFLAGS variable: LDFLAGS = -ldflags \"-X main.version=$(VERSION)\"",
                        "Create .PHONY: build declaration",
                        "Create build target with go build $(LDFLAGS) -o bin/$(BINARY_NAME) ./cmd/orchestrator",
                        "Add go build $(LDFLAGS) -o bin/$(LOOP_BINARY) ./cmd/loop-runner to build target",
                        "Add clean target to remove bin/ directory contents"
                      ],
                      "middleware": [],
                      "shared": [
                        "Document VERSION format expectations (semver tags like v1.0.0)",
                        "Document LDFLAGS injection pattern for main.version variable",
                        "Define bin/ directory as build artifact output location"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Makefile.buildTarget",
                    "related_concepts": [
                      "go build",
                      "ldflags",
                      "version injection",
                      "git describe",
                      "cross-compilation",
                      "CGO_ENABLED"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_005.2",
                    "description": "Create Makefile install target that installs compiled binaries to $(PREFIX)/bin with /usr/local/bin as default, supporting customizable installation paths",
                    "type": "sub_process",
                    "parent_id": "REQ_005",
                    "children": [],
                    "acceptance_criteria": [
                      "PREFIX variable defaults to /usr/local but can be overridden: PREFIX ?= /usr/local",
                      "BINDIR variable is derived from PREFIX: BINDIR = $(PREFIX)/bin",
                      "install target depends on build target (install: build)",
                      "install target creates BINDIR if it doesn't exist using install -d $(BINDIR)",
                      "install target copies binaries with 755 permissions using install -m 755",
                      "Running 'make install' places context-engine at /usr/local/bin/context-engine",
                      "Running 'make install' places loop-runner at /usr/local/bin/loop-runner",
                      "Running 'PREFIX=/opt make install' installs to /opt/bin/",
                      "Install target is marked as .PHONY",
                      "Installation preserves existing files' ownership when run with sudo"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Define PREFIX ?= /usr/local with override support",
                        "Define BINDIR = $(PREFIX)/bin derived variable",
                        "Create .PHONY: install declaration",
                        "Create install target with dependency on build: install: build",
                        "Add install -d $(BINDIR) to create directory if missing",
                        "Add install -m 755 bin/$(BINARY_NAME) $(BINDIR)/ for orchestrator",
                        "Add install -m 755 bin/$(LOOP_BINARY) $(BINDIR)/ for loop-runner",
                        "Add echo statements for user feedback on installation location"
                      ],
                      "middleware": [],
                      "shared": [
                        "Document PREFIX override usage in Makefile comments",
                        "Document that sudo may be required for /usr/local/bin installation",
                        "Define standard Unix install command flags (-d, -m 755)"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Makefile.installTarget",
                    "related_concepts": [
                      "PREFIX variable",
                      "BINDIR",
                      "install command",
                      "file permissions",
                      "directory creation",
                      "dependency ordering"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_005.3",
                    "description": "Create Makefile uninstall target that removes previously installed binaries from $(PREFIX)/bin, providing clean removal of context-engine installation",
                    "type": "sub_process",
                    "parent_id": "REQ_005",
                    "children": [],
                    "acceptance_criteria": [
                      "uninstall target removes $(BINDIR)/$(BINARY_NAME) using rm -f",
                      "uninstall target removes $(BINDIR)/$(LOOP_BINARY) using rm -f",
                      "uninstall target uses same PREFIX/BINDIR variables as install target",
                      "Running 'make uninstall' removes /usr/local/bin/context-engine",
                      "Running 'make uninstall' removes /usr/local/bin/loop-runner",
                      "Running 'PREFIX=/opt make uninstall' removes from /opt/bin/",
                      "Uninstall succeeds without error even if files don't exist (rm -f behavior)",
                      "Uninstall target is marked as .PHONY",
                      "Uninstall does not remove the BINDIR directory itself (only the binaries)"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create .PHONY: uninstall declaration",
                        "Create uninstall target with rm -f $(BINDIR)/$(BINARY_NAME)",
                        "Add rm -f $(BINDIR)/$(LOOP_BINARY) to uninstall target",
                        "Add echo statement confirming uninstallation",
                        "Use -f flag to prevent errors when files don't exist"
                      ],
                      "middleware": [],
                      "shared": [
                        "Document that uninstall requires same PREFIX as install",
                        "Document idempotent behavior (safe to run multiple times)"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Makefile.uninstallTarget",
                    "related_concepts": [
                      "rm command",
                      "uninstall pattern",
                      "PREFIX consistency",
                      "idempotent removal",
                      "error handling"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_005.4",
                    "description": "Create install.sh script that provides automated installation workflow including Go availability check, building, and sudo-based installation to /usr/local/bin",
                    "type": "sub_process",
                    "parent_id": "REQ_005",
                    "children": [],
                    "acceptance_criteria": [
                      "Script starts with #!/bin/bash shebang",
                      "Script uses set -e for fail-fast behavior on errors",
                      "Script defines PREFIX variable with default /usr/local and environment override",
                      "Script defines BINDIR as ${PREFIX}/bin",
                      "Script checks for Go installation using command -v go",
                      "Script exits with helpful error message if Go is not installed",
                      "Script checks for git installation for version detection",
                      "Script runs go build commands for both binaries",
                      "Script uses sudo install -d to create BINDIR if needed",
                      "Script uses sudo install -m 755 to copy binaries with correct permissions",
                      "Script outputs clear success message with installed binary paths",
                      "Script outputs example usage commands after successful installation",
                      "Script handles build failures gracefully with descriptive error messages"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Add #!/bin/bash shebang line",
                        "Add set -e for error handling",
                        "Define PREFIX=\"${PREFIX:-/usr/local}\" with environment override",
                        "Define BINDIR=\"${PREFIX}/bin\"",
                        "Add Go installation check: if ! command -v go &> /dev/null",
                        "Add git installation check for version detection",
                        "Add echo statements for build progress feedback",
                        "Add go build -o bin/context-engine ./cmd/orchestrator",
                        "Add go build -o bin/loop-runner ./cmd/loop-runner",
                        "Add echo statement indicating installation phase",
                        "Add sudo install -d \"${BINDIR}\" for directory creation",
                        "Add sudo install -m 755 bin/context-engine \"${BINDIR}/\"",
                        "Add sudo install -m 755 bin/loop-runner \"${BINDIR}/\"",
                        "Add success message with full paths: echo \"context-engine: ${BINDIR}/context-engine\"",
                        "Add usage example: echo \"Run: context-engine --help\""
                      ],
                      "middleware": [],
                      "shared": [
                        "Document prerequisite requirements (Go 1.21+, git)",
                        "Document environment variable override: PREFIX=/opt ./install.sh"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "InstallScript.automatedInstall",
                    "related_concepts": [
                      "bash scripting",
                      "set -e",
                      "command -v",
                      "sudo",
                      "user feedback",
                      "prerequisite checking",
                      "error messages"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_005.5",
                    "description": "Support user-local installation to ~/.local/bin without requiring sudo, enabling installation in user home directory with PATH configuration guidance",
                    "type": "sub_process",
                    "parent_id": "REQ_005",
                    "children": [],
                    "acceptance_criteria": [
                      "Makefile supports PREFIX=~/.local for user-local installation",
                      "Running 'PREFIX=~/.local make install' installs to ~/.local/bin/",
                      "install.sh detects when PREFIX is in user home and skips sudo",
                      "install.sh provides PATH configuration instructions for ~/.bashrc",
                      "install.sh provides PATH configuration instructions for ~/.zshrc",
                      "Installed binaries in ~/.local/bin have 755 permissions",
                      "User-local installation does not require root/sudo access",
                      "Documentation explains when to use user-local vs system-wide installation",
                      "Script outputs warning if ~/.local/bin is not in current PATH",
                      "Script provides exact export command to add to shell rc file"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "In install.sh, detect if PREFIX starts with $HOME or ~",
                        "Conditionally skip sudo when installing to user directories",
                        "Add install -d \"${BINDIR}\" without sudo for user paths",
                        "Add install -m 755 bin/context-engine \"${BINDIR}/\" without sudo",
                        "Add install -m 755 bin/loop-runner \"${BINDIR}/\" without sudo",
                        "Check if BINDIR is in PATH using [[ \":$PATH:\" == *\":$BINDIR:\"* ]]",
                        "If not in PATH, output: echo 'Add to ~/.bashrc or ~/.zshrc:'",
                        "Output exact command: echo 'export PATH=\"$HOME/.local/bin:$PATH\"'",
                        "Add example: echo 'PREFIX=~/.local make install' in Makefile help"
                      ],
                      "middleware": [],
                      "shared": [
                        "Document XDG Base Directory convention for ~/.local/bin",
                        "Document shell configuration files: ~/.bashrc, ~/.zshrc, ~/.profile",
                        "Document PATH precedence (user ~/.local/bin before /usr/local/bin)",
                        "Create help target in Makefile explaining PREFIX options"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "InstallScript.userLocalInstall",
                    "related_concepts": [
                      "~/.local/bin",
                      "XDG Base Directory",
                      "PATH configuration",
                      "no-sudo installation",
                      "shell rc files",
                      "user permissions"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_006",
                "description": "The system must support cross-compilation for multiple target platforms",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_006.1",
                    "description": "Build Go binary for macOS Intel (x86-64) architecture using GOOS=darwin GOARCH=amd64 environment variables",
                    "type": "sub_process",
                    "parent_id": "REQ_006",
                    "children": [],
                    "acceptance_criteria": [
                      "Binary compiles successfully with GOOS=darwin GOARCH=amd64",
                      "Binary is named with platform suffix: context-engine-darwin-amd64",
                      "Binary includes version information via ldflags (-X main.version)",
                      "Binary runs on macOS 10.13+ Intel machines without external dependencies",
                      "Static binary option available with CGO_ENABLED=0",
                      "Makefile target 'build-darwin-amd64' executes successfully",
                      "Binary file size is optimized (no debug symbols in release)",
                      "Binary passes smoke test on target architecture"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Implement build command: GOOS=darwin GOARCH=amd64 go build -o bin/context-engine-darwin-amd64 ./cmd/orchestrator",
                        "Implement build command for loop-runner: GOOS=darwin GOARCH=amd64 go build -o bin/loop-runner-darwin-amd64 ./cmd/loop-runner",
                        "Add version injection via ldflags: -ldflags \"-X main.version=$(VERSION)\"",
                        "Support static build option: CGO_ENABLED=0 for pure Go binary",
                        "Create bin/ output directory if not exists"
                      ],
                      "middleware": [
                        "Validate Go version 1.21+ is installed before build",
                        "Check required source files exist before compilation",
                        "Verify go.mod and go.sum are present and valid"
                      ],
                      "shared": [
                        "Define VERSION variable from git describe --tags --always --dirty",
                        "Define BINARY_NAME constant as 'context-engine'",
                        "Define LOOP_BINARY constant as 'loop-runner'",
                        "Define build output directory structure: bin/"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Build.macOSIntelBinary",
                    "related_concepts": [
                      "cross-compilation",
                      "darwin platform",
                      "x86-64 architecture",
                      "CGO_ENABLED",
                      "static binary",
                      "ldflags"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_006.2",
                    "description": "Build Go binary for macOS Apple Silicon (ARM64) architecture using GOOS=darwin GOARCH=arm64 environment variables",
                    "type": "sub_process",
                    "parent_id": "REQ_006",
                    "children": [],
                    "acceptance_criteria": [
                      "Binary compiles successfully with GOOS=darwin GOARCH=arm64",
                      "Binary is named with platform suffix: context-engine-darwin-arm64",
                      "Binary includes version information via ldflags (-X main.version)",
                      "Binary runs natively on Apple Silicon Macs (M1, M2, M3) without Rosetta",
                      "Static binary option available with CGO_ENABLED=0",
                      "Makefile target 'build-darwin-arm64' executes successfully",
                      "Binary file size is optimized (no debug symbols in release)",
                      "Binary passes smoke test on target architecture"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Implement build command: GOOS=darwin GOARCH=arm64 go build -o bin/context-engine-darwin-arm64 ./cmd/orchestrator",
                        "Implement build command for loop-runner: GOOS=darwin GOARCH=arm64 go build -o bin/loop-runner-darwin-arm64 ./cmd/loop-runner",
                        "Add version injection via ldflags: -ldflags \"-X main.version=$(VERSION)\"",
                        "Support static build option: CGO_ENABLED=0 for pure Go binary",
                        "Create bin/ output directory if not exists"
                      ],
                      "middleware": [
                        "Validate Go version 1.21+ is installed before build",
                        "Check required source files exist before compilation",
                        "Verify go.mod and go.sum are present and valid"
                      ],
                      "shared": [
                        "Define VERSION variable from git describe --tags --always --dirty",
                        "Define BINARY_NAME constant as 'context-engine'",
                        "Define LOOP_BINARY constant as 'loop-runner'",
                        "Define build output directory structure: bin/",
                        "Consider universal binary creation with lipo tool combining both darwin architectures"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Build.macOSAppleSiliconBinary",
                    "related_concepts": [
                      "cross-compilation",
                      "darwin platform",
                      "ARM64 architecture",
                      "Apple Silicon M1/M2/M3",
                      "universal binary"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_006.3",
                    "description": "Build Go binary for Linux x86-64 architecture using GOOS=linux GOARCH=amd64 environment variables for server deployments",
                    "type": "sub_process",
                    "parent_id": "REQ_006",
                    "children": [],
                    "acceptance_criteria": [
                      "Binary compiles successfully with GOOS=linux GOARCH=amd64",
                      "Binary is named with platform suffix: context-engine-linux-amd64",
                      "Binary includes version information via ldflags (-X main.version)",
                      "Binary runs on Linux distributions (Ubuntu, Debian, RHEL, Alpine) without external Go dependencies",
                      "Static binary builds successfully with CGO_ENABLED=0",
                      "Makefile target 'build-linux-amd64' executes successfully",
                      "Binary file size is optimized (no debug symbols in release)",
                      "Binary is compatible with containerized environments (Docker, Kubernetes)"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Implement build command: GOOS=linux GOARCH=amd64 go build -o bin/context-engine-linux-amd64 ./cmd/orchestrator",
                        "Implement build command for loop-runner: GOOS=linux GOARCH=amd64 go build -o bin/loop-runner-linux-amd64 ./cmd/loop-runner",
                        "Add version injection via ldflags: -ldflags \"-X main.version=$(VERSION)\"",
                        "Implement static build: CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build for container compatibility",
                        "Create bin/ output directory if not exists",
                        "Add strip option for smaller binary: go build -ldflags=\"-s -w\""
                      ],
                      "middleware": [
                        "Validate Go version 1.21+ is installed before build",
                        "Check required source files exist before compilation",
                        "Verify go.mod and go.sum are present and valid",
                        "Test binary compatibility with minimal container images (alpine, scratch)"
                      ],
                      "shared": [
                        "Define VERSION variable from git describe --tags --always --dirty",
                        "Define BINARY_NAME constant as 'context-engine'",
                        "Define LOOP_BINARY constant as 'loop-runner'",
                        "Define build output directory structure: bin/",
                        "Document glibc vs musl compatibility considerations"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Build.linuxAmd64Binary",
                    "related_concepts": [
                      "cross-compilation",
                      "linux platform",
                      "x86-64 architecture",
                      "static linking",
                      "glibc compatibility",
                      "musl libc"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_006.4",
                    "description": "Build Go binary for Linux ARM64 architecture using GOOS=linux GOARCH=arm64 environment variables for ARM servers and Raspberry Pi",
                    "type": "sub_process",
                    "parent_id": "REQ_006",
                    "children": [],
                    "acceptance_criteria": [
                      "Binary compiles successfully with GOOS=linux GOARCH=arm64",
                      "Binary is named with platform suffix: context-engine-linux-arm64",
                      "Binary includes version information via ldflags (-X main.version)",
                      "Binary runs on Linux ARM64 devices (Raspberry Pi 4+, AWS Graviton, ARM servers)",
                      "Static binary builds successfully with CGO_ENABLED=0",
                      "Makefile target 'build-linux-arm64' executes successfully",
                      "Binary file size is optimized (no debug symbols in release)",
                      "Binary is compatible with ARM-based container environments"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Implement build command: GOOS=linux GOARCH=arm64 go build -o bin/context-engine-linux-arm64 ./cmd/orchestrator",
                        "Implement build command for loop-runner: GOOS=linux GOARCH=arm64 go build -o bin/loop-runner-linux-arm64 ./cmd/loop-runner",
                        "Add version injection via ldflags: -ldflags \"-X main.version=$(VERSION)\"",
                        "Implement static build: CGO_ENABLED=0 GOOS=linux GOARCH=arm64 go build",
                        "Create bin/ output directory if not exists",
                        "Add strip option for smaller binary: go build -ldflags=\"-s -w\""
                      ],
                      "middleware": [
                        "Validate Go version 1.21+ is installed before build",
                        "Check required source files exist before compilation",
                        "Verify go.mod and go.sum are present and valid",
                        "Test binary compatibility with ARM64 container images"
                      ],
                      "shared": [
                        "Define VERSION variable from git describe --tags --always --dirty",
                        "Define BINARY_NAME constant as 'context-engine'",
                        "Define LOOP_BINARY constant as 'loop-runner'",
                        "Define build output directory structure: bin/",
                        "Document ARM64 platform requirements and limitations"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Build.linuxArm64Binary",
                    "related_concepts": [
                      "cross-compilation",
                      "linux platform",
                      "ARM64 architecture",
                      "Raspberry Pi",
                      "AWS Graviton",
                      "embedded systems"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_006.5",
                    "description": "Build Go binary for Windows x86-64 architecture using GOOS=windows GOARCH=amd64 environment variables with .exe extension",
                    "type": "sub_process",
                    "parent_id": "REQ_006",
                    "children": [],
                    "acceptance_criteria": [
                      "Binary compiles successfully with GOOS=windows GOARCH=amd64",
                      "Binary is named with platform suffix and extension: context-engine-windows-amd64.exe",
                      "Binary includes version information via ldflags (-X main.version)",
                      "Binary runs on Windows 10+ without additional runtime dependencies",
                      "Makefile target 'build-windows-amd64' executes successfully",
                      "Binary handles Windows path separators correctly (backslash)",
                      "Binary file size is optimized (no debug symbols in release)",
                      "Binary can be executed from PowerShell and Command Prompt"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Implement build command: GOOS=windows GOARCH=amd64 go build -o bin/context-engine-windows-amd64.exe ./cmd/orchestrator",
                        "Implement build command for loop-runner: GOOS=windows GOARCH=amd64 go build -o bin/loop-runner-windows-amd64.exe ./cmd/loop-runner",
                        "Add version injection via ldflags: -ldflags \"-X main.version=$(VERSION)\"",
                        "Add Windows-specific ldflags if needed: -ldflags=\"-H windowsgui\" for GUI mode (optional)",
                        "Create bin/ output directory if not exists",
                        "Add strip option for smaller binary: go build -ldflags=\"-s -w\""
                      ],
                      "middleware": [
                        "Validate Go version 1.21+ is installed before build",
                        "Check required source files exist before compilation",
                        "Verify go.mod and go.sum are present and valid",
                        "Ensure path handling uses filepath.Join for cross-platform compatibility in source code"
                      ],
                      "shared": [
                        "Define VERSION variable from git describe --tags --always --dirty",
                        "Define BINARY_NAME constant as 'context-engine'",
                        "Define LOOP_BINARY constant as 'loop-runner'",
                        "Define build output directory structure: bin/",
                        "Use path/filepath package for Windows path compatibility in Go source",
                        "Document Windows-specific installation path (e.g., C:\\Program Files\\context-engine or user PATH)"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "Build.windowsAmd64Binary",
                    "related_concepts": [
                      "cross-compilation",
                      "windows platform",
                      "x86-64 architecture",
                      "exe extension",
                      "Windows compatibility",
                      "path handling"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_007",
                "description": "The system must port all core data structures from Python dataclasses to Go structs with JSON tags",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_007.1",
                    "description": "Port RequirementNode Python dataclass to Go struct with all fields, JSON tags, and validation constants",
                    "type": "sub_process",
                    "parent_id": "REQ_007",
                    "children": [],
                    "acceptance_criteria": [
                      "Go struct includes all 11 fields: id, description, type, parent_id, children, acceptance_criteria, implementation, testable_properties, function_id, related_concepts, category",
                      "All fields have appropriate JSON struct tags matching snake_case format (e.g., `json:\"parent_id,omitempty\"`)",
                      "Optional fields (parent_id, implementation, function_id) use pointer types (*string, *ImplementationComponents)",
                      "List fields (children, acceptance_criteria, testable_properties, related_concepts) use Go slices",
                      "Children field supports recursive self-reference as []RequirementNode",
                      "Category field has default value 'functional' handled via constructor or zero-value logic",
                      "VALID_REQUIREMENT_TYPES constant defined as string slice or map: ['parent', 'sub_process', 'implementation']",
                      "VALID_CATEGORIES constant defined: ['functional', 'non_functional', 'security', 'performance', 'usability', 'integration']",
                      "Struct compiles without errors and passes go vet",
                      "JSON marshaling produces output identical to Python to_dict() method",
                      "JSON unmarshaling correctly reconstructs nested RequirementNode children recursively"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [],
                      "middleware": [],
                      "shared": [
                        "Define RequirementNode struct in internal/models/requirement.go",
                        "Define package-level constants VALID_REQUIREMENT_TYPES and VALID_CATEGORIES",
                        "Implement NewRequirementNode constructor function with default values",
                        "Implement ToDict/ToJSON method returning map[string]interface{} for compatibility",
                        "Implement FromDict/FromJSON class method for deserialization",
                        "Add struct tags: `json:\"field_name\"` and `json:\"field_name,omitempty\"` for optional fields",
                        "Import dependencies: encoding/json, define nested struct references"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "models.RequirementNode",
                    "related_concepts": [
                      "dataclass to struct conversion",
                      "JSON serialization",
                      "Go struct tags",
                      "optional fields with pointers",
                      "nested structs",
                      "recursive data structures"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_007.2",
                    "description": "Port RequirementHierarchy Python class to Go struct with container methods and recursive operations",
                    "type": "sub_process",
                    "parent_id": "REQ_007",
                    "children": [],
                    "acceptance_criteria": [
                      "Go struct has two fields: requirements ([]RequirementNode) and metadata (map[string]interface{})",
                      "JSON struct tags match Python serialization format",
                      "AddRequirement method appends top-level RequirementNode to requirements slice",
                      "AddChild method locates parent by ID, sets child.parent_id, and appends to parent.children; returns bool success",
                      "GetByID method performs recursive depth-first search across entire hierarchy; returns *RequirementNode or nil",
                      "NextChildID method generates sequential child ID in format 'parent_id.N' where N is 1-indexed child count + 1",
                      "NextChildID returns error if parent_id not found (matches Python ValueError behavior)",
                      "ToDict method serializes to map with 'requirements' and 'metadata' keys",
                      "FromDict class function deserializes from map, reconstructing all RequirementNode children recursively",
                      "All methods have proper Go documentation comments",
                      "Unit tests verify tree operations: add, find, generate ID for 3-level deep hierarchy"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [],
                      "middleware": [],
                      "shared": [
                        "Define RequirementHierarchy struct in internal/models/requirement.go",
                        "Implement (h *RequirementHierarchy) AddRequirement(node RequirementNode) method",
                        "Implement (h *RequirementHierarchy) AddChild(parentID string, child RequirementNode) bool method",
                        "Implement (h *RequirementHierarchy) GetByID(reqID string) *RequirementNode with recursive helper",
                        "Implement (h *RequirementHierarchy) NextChildID(parentID string) (string, error) method",
                        "Implement (h *RequirementHierarchy) ToDict() map[string]interface{} method",
                        "Implement RequirementHierarchyFromDict(data map[string]interface{}) *RequirementHierarchy function",
                        "Add helper function searchNodes(nodes []RequirementNode, id string) *RequirementNode for DFS",
                        "Use fmt.Sprintf for ID generation: fmt.Sprintf(\"%s.%d\", parentID, len(parent.Children)+1)"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "models.RequirementHierarchy",
                    "related_concepts": [
                      "container struct pattern",
                      "recursive tree traversal",
                      "method receivers in Go",
                      "ID generation",
                      "metadata map",
                      "optional return values"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_007.3",
                    "description": "Port Feature struct from loop-runner.py JSON schema to Go struct with all fields for feature tracking",
                    "type": "sub_process",
                    "parent_id": "REQ_007",
                    "children": [],
                    "acceptance_criteria": [
                      "Go struct includes all required fields: id (string), name (string), description (string)",
                      "Go struct includes all optional fields: priority (*int), category (*string), passes (bool), blocked (bool), blocked_reason (*string), blocked_by ([]string), suggested_fix (*string), dependencies ([]string), tests ([]string), complexity (*string), needs_review (bool), qa_origin (*string), severity (*string)",
                      "JSON struct tags use snake_case matching Python schema (e.g., `json:\"blocked_reason,omitempty\"`)",
                      "Boolean fields passes, blocked, needs_review default to false (Go zero value)",
                      "Slice fields use omitempty to exclude empty arrays from JSON output",
                      "Complexity field validates against allowed values: 'high', 'medium', 'low' (case-insensitive)",
                      "Priority field when present must be numeric (int or float coerced to int)",
                      "JSON marshaling produces output compatible with feature_list.json schema",
                      "JSON unmarshaling handles missing optional fields gracefully with nil/zero values",
                      "Struct supports round-trip serialization: unmarshal -> marshal produces equivalent JSON"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [],
                      "middleware": [],
                      "shared": [
                        "Define Feature struct in internal/models/feature.go",
                        "Define REQUIRED_FIELDS constant as []string{'id', 'name', 'description'}",
                        "Define OPTIONAL_FIELDS constant listing all optional field names",
                        "Define VALID_COMPLEXITY constant as []string{'high', 'medium', 'low'}",
                        "Add JSON struct tags with omitempty for all optional fields",
                        "Use pointer types (*string, *int) for optional scalar fields to distinguish nil from zero",
                        "Implement GetComplexity() method returning lowercase normalized complexity or empty string",
                        "Implement IsBlocked() bool method checking blocked field and blocked_by slice"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "models.Feature",
                    "related_concepts": [
                      "JSON schema compliance",
                      "optional boolean fields",
                      "feature dependency tracking",
                      "complexity enum",
                      "blocked state management"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_007.4",
                    "description": "Port FeatureList container struct for managing feature collections with validation and dependency operations",
                    "type": "sub_process",
                    "parent_id": "REQ_007",
                    "children": [],
                    "acceptance_criteria": [
                      "Go struct has Features field as []Feature slice",
                      "JSON struct tag produces {\"features\": [...]} format matching feature_list.json schema",
                      "ValidateFeatureList method returns structured validation result with valid (bool), errors ([]string), warnings ([]string)",
                      "Validation checks all features have required fields (id, name, description)",
                      "Validation detects duplicate feature IDs and adds to errors",
                      "Validation checks priority is numeric when present, adds warning if not",
                      "Validation checks complexity is 'high'/'medium'/'low' when present, adds warning if invalid",
                      "Validation warns when dependency references unknown feature ID",
                      "DetectCircularDependencies method returns cycle path as []string or empty slice if no cycle",
                      "Circular dependency detection uses DFS with recursion stack tracking",
                      "LoadFromFile(path string) (*FeatureList, error) reads and parses feature_list.json",
                      "SaveToFile(path string) error writes formatted JSON with indentation",
                      "GetFeatureByID(id string) *Feature method for lookup",
                      "GetIncompleteFeatures() []Feature returns features where passes == false"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [],
                      "middleware": [],
                      "shared": [
                        "Define FeatureList struct in internal/models/feature.go",
                        "Define ValidationResult struct with Valid bool, Errors []string, Warnings []string",
                        "Implement (fl *FeatureList) Validate() ValidationResult method",
                        "Implement (fl *FeatureList) DetectCircularDependencies() []string using DFS algorithm",
                        "Implement LoadFeatureListFromFile(path string) (*FeatureList, error) function",
                        "Implement (fl *FeatureList) SaveToFile(path string) error method with json.MarshalIndent",
                        "Implement (fl *FeatureList) GetFeatureByID(id string) *Feature method",
                        "Implement (fl *FeatureList) GetIncompleteFeatures() []Feature method",
                        "Build dependency graph as map[string][]string for cycle detection",
                        "Use visited map and recursion stack (recStack map) for DFS cycle detection"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "models.FeatureList",
                    "related_concepts": [
                      "collection container",
                      "JSON file I/O",
                      "dependency graph",
                      "circular dependency detection",
                      "topological sort",
                      "validation errors"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_007.5",
                    "description": "Implement Validate() methods for all structs to enforce post-initialization validation matching Python __post_init__ behavior",
                    "type": "sub_process",
                    "parent_id": "REQ_007",
                    "children": [],
                    "acceptance_criteria": [
                      "RequirementNode.Validate() returns error if type not in VALID_REQUIREMENT_TYPES",
                      "RequirementNode.Validate() returns error if description is empty or whitespace-only",
                      "RequirementNode.Validate() returns error if category not in VALID_CATEGORIES",
                      "Validation error messages match Python format: 'Invalid type X. Must be one of: parent, sub_process, implementation'",
                      "Feature.Validate() returns error if id, name, or description is empty",
                      "Feature.Validate() returns error if complexity provided but not in ['high', 'medium', 'low']",
                      "ImplementationComponents.Validate() returns nil (no validation required, all fields optional)",
                      "TestableProperty.Validate() returns error if property_type not in VALID_PROPERTY_TYPES",
                      "VALID_PROPERTY_TYPES constant defined: ['invariant', 'round_trip', 'idempotence', 'oracle']",
                      "NewRequirementNode constructor calls Validate() and returns (RequirementNode, error)",
                      "All Validate methods are idempotent and can be called multiple times",
                      "Validation errors are descriptive and include the invalid value",
                      "strings.TrimSpace used for whitespace-only description check"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [],
                      "middleware": [],
                      "shared": [
                        "Implement (r *RequirementNode) Validate() error method",
                        "Implement (f *Feature) Validate() error method",
                        "Implement (ic *ImplementationComponents) Validate() error method (returns nil)",
                        "Implement (tp *TestableProperty) Validate() error method",
                        "Define contains(slice []string, item string) bool helper function",
                        "Define VALID_PROPERTY_TYPES constant in internal/models/requirement.go",
                        "Use fmt.Errorf for descriptive error messages with invalid values",
                        "Use strings.TrimSpace for description whitespace validation",
                        "Create NewRequirementNode(id, description, reqType string, opts ...Option) (*RequirementNode, error) constructor",
                        "Create NewFeature(id, name, description string) (*Feature, error) constructor",
                        "Consider defining custom ValidationError type with Field and Message for structured errors"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "models.Validate",
                    "related_concepts": [
                      "validation pattern in Go",
                      "error handling",
                      "constructor validation",
                      "enum validation",
                      "required field validation",
                      "custom error types"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_008",
                "description": "The system must replace Python dependencies with Go equivalent packages",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_008.1",
                    "description": "Replace Python subprocess module with Go os/exec package for external command execution including Claude CLI, git, and beads CLI calls",
                    "type": "sub_process",
                    "parent_id": "REQ_008",
                    "children": [],
                    "acceptance_criteria": [
                      "All subprocess.run() calls are replaced with exec.Command() or exec.CommandContext()",
                      "Command timeout support using context.WithTimeout() matches Python's timeout parameter",
                      "Capture stdout and stderr separately using cmd.StdoutPipe() and cmd.StderrPipe()",
                      "Support for working directory via cmd.Dir matches subprocess cwd parameter",
                      "Environment variable passing via cmd.Env matches subprocess env parameter",
                      "Return structured CommandResult with Success, Output, and Error fields",
                      "Streaming output support using goroutines and channels for real-time Claude CLI output",
                      "Handle SIGTERM/SIGKILL for process termination using cmd.Process.Kill()",
                      "Support for combined output via cmd.CombinedOutput() when stderr merge is needed",
                      "Error handling returns go error types with context about failure reason"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create internal/runner/subprocess.go with generic command execution wrapper",
                        "Create internal/runner/claude.go with Claude CLI-specific execution logic",
                        "Create internal/runner/git.go with git command execution helpers",
                        "Create pkg/beads/client.go with beads CLI wrapper (public API)",
                        "Implement runClaudeCode() function matching Python's run_claude_code()",
                        "Implement streaming reader using bufio.Scanner for line-by-line output",
                        "Implement async command execution using goroutines for parallel operations",
                        "Create CommandResult struct with Success bool, Output string, Error string, ExitCode int"
                      ],
                      "middleware": [
                        "Implement command timeout middleware using context.WithTimeout()",
                        "Add retry logic wrapper for transient command failures",
                        "Implement command logging middleware for debug output"
                      ],
                      "shared": [
                        "Define CommandResult struct in internal/models/command.go",
                        "Define CommandOptions struct with Timeout, Dir, Env, Stdin fields",
                        "Create error types: ErrCommandTimeout, ErrCommandFailed, ErrCommandNotFound",
                        "Define constants for default timeouts (1 hour for Claude, 30s for git)"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "runner.SubprocessExecutor.Execute",
                    "related_concepts": [
                      "os/exec",
                      "context.Context",
                      "exec.CommandContext",
                      "io.Pipe",
                      "bufio.Scanner",
                      "goroutines",
                      "channels",
                      "streaming output"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_008.2",
                    "description": "Replace Python json module with Go encoding/json package for JSON parsing and serialization of feature lists, requirement hierarchies, and session data",
                    "type": "sub_process",
                    "parent_id": "REQ_008",
                    "children": [],
                    "acceptance_criteria": [
                      "All json.loads() calls are replaced with json.Unmarshal()",
                      "All json.dumps() calls are replaced with json.Marshal() or json.MarshalIndent()",
                      "Struct fields use appropriate json tags with correct casing (snake_case for Python compatibility)",
                      "Optional fields use pointer types with omitempty tag for null handling",
                      "Feature struct correctly serializes/deserializes with all fields from Python Feature dataclass",
                      "RequirementNode struct supports recursive children serialization",
                      "Custom MarshalJSON/UnmarshalJSON implemented for enum types (requirement type, complexity)",
                      "JSON validation errors return descriptive error messages with field context",
                      "Pretty-printed JSON output for human-readable files uses json.MarshalIndent()",
                      "Handle json.RawMessage for dynamic/unknown JSON structures"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create internal/models/feature.go with Feature and FeatureList structs",
                        "Create internal/models/requirement.go with RequirementNode and RequirementHierarchy structs",
                        "Create internal/models/session.go with session tracking structs",
                        "Implement custom UnmarshalJSON for RequirementType enum validation",
                        "Implement custom MarshalJSON for Complexity enum serialization",
                        "Create file I/O helpers: LoadJSON[T](path string) and SaveJSON[T](path string, data T)",
                        "Implement JSON schema validation using struct tags and validation methods"
                      ],
                      "middleware": [
                        "Create JSON validation middleware that validates required fields",
                        "Implement JSON error wrapper that provides field-level error context"
                      ],
                      "shared": [
                        "Define Feature struct with json tags matching Python schema",
                        "Define FeatureList struct with Features []Feature",
                        "Define RequirementNode struct with recursive Children []RequirementNode",
                        "Define ImplementationComponents struct for nested requirement data",
                        "Define TestableProperty struct for property-based test specifications",
                        "Create JSONError type with Field, Message, and Position information",
                        "Define constants for JSON field names to ensure consistency"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "models.JSONSerializer.Marshal",
                    "related_concepts": [
                      "encoding/json",
                      "json.Marshal",
                      "json.Unmarshal",
                      "struct tags",
                      "json.RawMessage",
                      "custom MarshalJSON",
                      "custom UnmarshalJSON",
                      "omitempty"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_008.3",
                    "description": "Replace Python pathlib.Path with Go path/filepath package for cross-platform file system path handling",
                    "type": "sub_process",
                    "parent_id": "REQ_008",
                    "children": [],
                    "acceptance_criteria": [
                      "All Path() constructors are replaced with filepath operations",
                      "Path.resolve() calls replaced with filepath.Abs()",
                      "Path.relative_to() calls replaced with filepath.Rel()",
                      "Path / operator (join) replaced with filepath.Join()",
                      "Path.exists() replaced with os.Stat() error checking",
                      "Path.is_dir() replaced with os.Stat().IsDir()",
                      "Path.is_file() replaced with os.Stat() followed by !IsDir()",
                      "Path.mkdir(parents=True) replaced with os.MkdirAll()",
                      "Path.glob() replaced with filepath.Glob() or filepath.Walk()",
                      "Path.read_text() replaced with os.ReadFile()",
                      "Path.write_text() replaced with os.WriteFile()",
                      "Path.name replaced with filepath.Base()",
                      "Path.parent replaced with filepath.Dir()",
                      "Path.suffix replaced with filepath.Ext()",
                      "Cross-platform path separator handling using filepath.FromSlash() and filepath.ToSlash()"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create internal/utils/paths.go with path utility functions",
                        "Implement EnsureDir(path string) that creates directory if not exists",
                        "Implement FileExists(path string) bool helper",
                        "Implement DirExists(path string) bool helper",
                        "Implement ReadTextFile(path string) (string, error) helper",
                        "Implement WriteTextFile(path string, content string) error helper",
                        "Implement FindFiles(pattern string, root string) ([]string, error) using filepath.Walk",
                        "Implement ResolveProjectPath(path string) (string, error) for project directory resolution",
                        "Create path normalization for cross-platform compatibility"
                      ],
                      "middleware": [
                        "Implement path validation middleware that checks for path traversal attacks",
                        "Add file permission checking before write operations"
                      ],
                      "shared": [
                        "Define ProjectPaths struct with common project directory paths",
                        "Define constants for common file extensions (.json, .md, .go)",
                        "Define constants for special directory names (.context-engine, thoughts)",
                        "Create PathError type with Operation, Path, and underlying error",
                        "Define interface PathResolver for testable path operations"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "utils.PathResolver.Resolve",
                    "related_concepts": [
                      "path/filepath",
                      "filepath.Join",
                      "filepath.Abs",
                      "filepath.Rel",
                      "filepath.Walk",
                      "os.Stat",
                      "os.MkdirAll",
                      "filepath.Glob"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_008.4",
                    "description": "Replace Python argparse with cobra CLI framework for command-line argument parsing with subcommands, flags, and help generation",
                    "type": "sub_process",
                    "parent_id": "REQ_008",
                    "children": [],
                    "acceptance_criteria": [
                      "Root command 'context-engine' created with Use, Short, and Long descriptions",
                      "All argparse arguments converted to cobra flags with matching names and shortcuts",
                      "--project/-p flag implemented as StringVarP for project path",
                      "--new flag implemented as StringVar for new project creation",
                      "--model/-m flag implemented as StringVarP with default 'sonnet'",
                      "--max-sessions flag implemented as IntVar with default 100",
                      "--continue/-c flag implemented as BoolVarP",
                      "--status/-s flag implemented as BoolVarP",
                      "--mcp-preset flag implemented as StringVar with validation for allowed values",
                      "--with-qa flag implemented as BoolVar",
                      "--debug/-d flag implemented as BoolVarP",
                      "Subcommands created for distinct operations (run, status, init, resume)",
                      "Help text auto-generated and matches Python argparse output quality",
                      "Version flag shows git commit hash via ldflags injection",
                      "Mutually exclusive flag groups enforced (--project vs --new)",
                      "Required flag validation with clear error messages",
                      "Environment variable binding using viper for configuration override"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create cmd/orchestrator/main.go with root command initialization",
                        "Create cmd/orchestrator/run.go with run subcommand",
                        "Create cmd/orchestrator/status.go with status subcommand",
                        "Create cmd/orchestrator/init.go with init subcommand for new projects",
                        "Create cmd/loop-runner/main.go with loop-runner root command",
                        "Implement flag validation in PreRunE hooks",
                        "Implement mutual exclusivity checks for conflicting flags",
                        "Add version command using cobra built-in version flag",
                        "Integrate viper for config file support (.context-engine.yaml)"
                      ],
                      "middleware": [
                        "Create PreRunE validation middleware for common flag checks",
                        "Implement PersistentPreRunE for debug logging setup",
                        "Add config file loading middleware using viper"
                      ],
                      "shared": [
                        "Define Config struct for all configuration options",
                        "Define flag name constants to prevent typos",
                        "Define model choices as constants (ModelSonnet, ModelOpus)",
                        "Define MCP preset choices as constants (PresetRust, PresetPython, PresetNode, PresetDocs)",
                        "Create validation functions: ValidateModel(), ValidateMCPPreset()",
                        "Define exit codes as constants (ExitSuccess, ExitError, ExitUsage)"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "cli.CommandParser.Parse",
                    "related_concepts": [
                      "cobra",
                      "pflag",
                      "viper",
                      "cobra.Command",
                      "PersistentFlags",
                      "LocalFlags",
                      "RunE",
                      "PreRunE",
                      "subcommands"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_008.5",
                    "description": "Replace Python dataclasses with Go structs and validation methods for all data models including RequirementNode, Feature, Session, and ImplementationComponents",
                    "type": "sub_process",
                    "parent_id": "REQ_008",
                    "children": [],
                    "acceptance_criteria": [
                      "All Python @dataclass definitions converted to Go struct types",
                      "RequirementNode struct includes all fields: ID, Description, Type, ParentID, Children, AcceptanceCriteria, Implementation, TestableProperties, FunctionID, RelatedConcepts, Category",
                      "Optional fields use pointer types (*string, *int) for nil representation",
                      "Slice fields initialized to empty slice rather than nil in constructors",
                      "Validate() error method implemented for each struct matching Python __post_init__",
                      "Constructor functions NewRequirementNode(), NewFeature() etc. with validation",
                      "String() method implemented for human-readable output",
                      "Equality comparison methods implemented where needed",
                      "RequirementHierarchy struct includes tree traversal methods (GetNode, GetRoot, GetChildren)",
                      "ImplementationComponents struct with Frontend, Backend, Middleware, Shared slices",
                      "TestableProperty struct with PropertyName, PropertyType, TestCases fields",
                      "Feature struct with ID, Name, Description, Priority, Category, Passes, Blocked, Dependencies",
                      "Enum types implemented using const + iota pattern with String() method",
                      "RequirementType enum: Parent, SubProcess, Implementation",
                      "Complexity enum: Low, Medium, High, Critical"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Create internal/models/requirement.go with RequirementNode and RequirementHierarchy",
                        "Create internal/models/feature.go with Feature and FeatureList structs",
                        "Create internal/models/implementation.go with ImplementationComponents struct",
                        "Create internal/models/property.go with TestableProperty struct",
                        "Create internal/models/session.go with Session tracking struct",
                        "Create internal/models/enums.go with RequirementType, Complexity, and other enums",
                        "Implement tree traversal methods on RequirementHierarchy",
                        "Implement validation logic in Validate() methods matching Python constraints",
                        "Implement ID format validation (REQ_XXX.Y.Z pattern) using regexp"
                      ],
                      "middleware": [
                        "Create validation middleware that calls Validate() on all structs before processing",
                        "Implement struct sanitization middleware for input data"
                      ],
                      "shared": [
                        "Define RequirementNode struct with json and validation tags",
                        "Define RequirementHierarchy struct with root node and lookup map",
                        "Define Feature struct matching Python Feature dataclass exactly",
                        "Define FeatureList struct with Features slice",
                        "Define ImplementationComponents with Frontend, Backend, Middleware, Shared []string",
                        "Define TestableProperty with all testing specification fields",
                        "Define Session struct for tracking orchestrator state",
                        "Define RequirementType using const iota: TypeParent, TypeSubProcess, TypeImplementation",
                        "Define Complexity using const iota: ComplexityLow, ComplexityMedium, ComplexityHigh",
                        "Create error types: ErrInvalidRequirementID, ErrInvalidType, ErrValidationFailed",
                        "Define interface Validatable with Validate() error method",
                        "Create utility functions: IsValidRequirementID(id string) bool"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "models.DataStructures.Define",
                    "related_concepts": [
                      "Go structs",
                      "struct methods",
                      "Validate() error",
                      "constructor functions",
                      "embedded structs",
                      "pointer receivers",
                      "value receivers",
                      "struct composition"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_009",
                "description": "The system must implement proper Go project structure following standard conventions",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_009.1",
                    "description": "Create cmd/ directory structure for binary entry points containing orchestrator and loop-runner main packages",
                    "type": "sub_process",
                    "parent_id": "REQ_009",
                    "children": [],
                    "acceptance_criteria": [
                      "cmd/ directory exists at project root level",
                      "cmd/orchestrator/ subdirectory contains main.go with package main declaration",
                      "cmd/loop-runner/ subdirectory contains main.go with package main declaration",
                      "Each main.go imports and initializes the cobra root command from internal/cli",
                      "Each main.go includes version variable placeholder for LDFLAGS injection",
                      "go build ./cmd/orchestrator produces context-engine binary without errors",
                      "go build ./cmd/loop-runner produces loop-runner binary without errors",
                      "Both binaries respond to --help flag with usage information",
                      "Both binaries respond to --version flag displaying injected version string"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "cmd/orchestrator/main.go - Main entry point importing internal/app/orchestrator",
                        "cmd/loop-runner/main.go - Main entry point importing internal/app/loop_runner",
                        "Version variable declaration: var version = \"dev\" for LDFLAGS override",
                        "Main function initializes cobra command and calls Execute()",
                        "Error handling with os.Exit(1) on command execution failure"
                      ],
                      "middleware": [],
                      "shared": [
                        "Version string constant accessible from both binaries",
                        "Common initialization patterns for CLI setup"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "ProjectStructure.createCmdDirectory",
                    "related_concepts": [
                      "Go project layout",
                      "binary entry points",
                      "main packages",
                      "cobra CLI",
                      "executable targets"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_009.2",
                    "description": "Create internal/ directory for private packages including app, models, pipeline, runner, and cli subdirectories with appropriate Go package organization",
                    "type": "sub_process",
                    "parent_id": "REQ_009",
                    "children": [],
                    "acceptance_criteria": [
                      "internal/ directory exists at project root",
                      "internal/app/ contains orchestrator.go and loop_runner.go with core application logic",
                      "internal/models/ contains feature.go, requirement.go, and session.go with struct definitions",
                      "internal/pipeline/ contains steps.go, pipeline.go, decomposition.go, and checkpoint.go",
                      "internal/runner/ contains claude.go and subprocess.go for external command execution",
                      "internal/cli/ contains colors.go and prompts.go for terminal interaction",
                      "Each subdirectory has its own package declaration matching directory name",
                      "All internal packages import correctly from parent module path",
                      "External packages cannot import from internal/ (enforced by Go compiler)",
                      "go vet ./internal/... passes without errors",
                      "go test ./internal/... executes test files in all subdirectories"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/app/orchestrator.go - Orchestrator struct with Run(), LoadProject(), SaveState() methods",
                        "internal/app/loop_runner.go - LoopRunner struct with Start(), Stop(), ProcessFeature() methods",
                        "internal/models/feature.go - Feature and FeatureList structs with JSON tags and Validate() methods",
                        "internal/models/requirement.go - RequirementNode and RequirementHierarchy structs with tree traversal",
                        "internal/models/session.go - Session tracking structs for Claude interactions",
                        "internal/pipeline/steps.go - PipelineStep interface and 7 step implementations",
                        "internal/pipeline/pipeline.go - PlanningPipeline orchestrator with Execute() method",
                        "internal/pipeline/decomposition.go - RequirementDecomposer with DecomposeRequirement() method",
                        "internal/pipeline/checkpoint.go - CheckpointManager with Save(), Load(), Recover() methods",
                        "internal/runner/claude.go - ClaudeRunner with RunCommand(), StreamOutput() methods",
                        "internal/runner/subprocess.go - Generic exec.Command wrapper with timeout support",
                        "internal/cli/colors.go - ANSI color constants and formatting functions",
                        "internal/cli/prompts.go - Interactive prompt helpers using bufio.Scanner"
                      ],
                      "middleware": [
                        "Context propagation through all internal packages for cancellation",
                        "Error wrapping with pkg/errors or fmt.Errorf for stack traces"
                      ],
                      "shared": [
                        "Common interfaces defined in internal/models for cross-package use",
                        "Shared error types in internal/errors package",
                        "Configuration structs in internal/config package"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "ProjectStructure.createInternalDirectory",
                    "related_concepts": [
                      "Go internal packages",
                      "package encapsulation",
                      "private API",
                      "module organization",
                      "dependency injection"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_009.3",
                    "description": "Create pkg/ directory for public reusable packages, specifically the beads CLI client wrapper that can be imported by external projects",
                    "type": "sub_process",
                    "parent_id": "REQ_009",
                    "children": [],
                    "acceptance_criteria": [
                      "pkg/ directory exists at project root",
                      "pkg/beads/ subdirectory contains client.go with exported BeadsClient struct",
                      "BeadsClient provides methods: CreateBead(), UpdateBead(), ListBeads(), GetBead(), SearchBeads()",
                      "All exported types have godoc comments",
                      "Package can be imported as github.com/zeddy89/silmari-Context-Engine/pkg/beads",
                      "Public API uses only standard library types or types defined in pkg/",
                      "No imports from internal/ packages in pkg/ code",
                      "go doc ./pkg/beads generates complete API documentation",
                      "Unit tests achieve minimum 80% coverage for pkg/beads",
                      "Example test files demonstrate usage patterns"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "pkg/beads/client.go - BeadsClient struct with bd CLI subprocess execution",
                        "pkg/beads/types.go - Bead, BeadList, BeadQuery exported structs with JSON tags",
                        "pkg/beads/errors.go - BeadError, NotFoundError, ValidationError types",
                        "NewBeadsClient(opts ...Option) constructor with functional options pattern",
                        "CreateBead(ctx context.Context, bead *Bead) error method",
                        "UpdateBead(ctx context.Context, id string, updates *BeadUpdate) error method",
                        "ListBeads(ctx context.Context, query *BeadQuery) ([]Bead, error) method",
                        "GetBead(ctx context.Context, id string) (*Bead, error) method",
                        "SearchBeads(ctx context.Context, query string) ([]Bead, error) method",
                        "pkg/beads/options.go - WithTimeout, WithBinaryPath, WithWorkDir functional options"
                      ],
                      "middleware": [
                        "Context-aware operations with cancellation support",
                        "Retry logic for transient failures with exponential backoff"
                      ],
                      "shared": [
                        "Bead struct matching beads CLI JSON output format",
                        "BeadQuery struct for filtering and pagination",
                        "Common option patterns reusable across pkg/ packages"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "ProjectStructure.createPkgDirectory",
                    "related_concepts": [
                      "public Go packages",
                      "reusable libraries",
                      "CLI wrapper",
                      "beads integration",
                      "exported APIs"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_009.4",
                    "description": "Create go.mod file for dependency management with proper module path, Go version specification, and required third-party dependencies",
                    "type": "sub_process",
                    "parent_id": "REQ_009",
                    "children": [],
                    "acceptance_criteria": [
                      "go.mod file exists at project root",
                      "Module path is github.com/zeddy89/silmari-Context-Engine",
                      "Go version specified as go 1.21 or higher",
                      "cobra dependency declared: github.com/spf13/cobra v1.8.0 or later",
                      "Required dependencies include github.com/spf13/pflag for flag parsing",
                      "Optional testing dependencies: github.com/stretchr/testify for assertions",
                      "Optional property testing: github.com/leanovate/gopter or pgregory.net/rapid",
                      "go.sum file generated with checksums for all dependencies",
                      "go mod tidy completes without errors",
                      "go mod verify confirms dependency integrity",
                      "go mod download retrieves all dependencies successfully",
                      "No replace directives unless explicitly required for local development"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "go.mod with module github.com/zeddy89/silmari-Context-Engine",
                        "go 1.21 directive for minimum Go version",
                        "require block with direct dependencies and versions",
                        "require block with indirect dependencies auto-managed by go mod tidy",
                        "Dependency: github.com/spf13/cobra for CLI framework",
                        "Dependency: github.com/spf13/pflag for POSIX-compliant flags",
                        "Dependency: github.com/stretchr/testify for test assertions (test only)",
                        "Dependency: github.com/leanovate/gopter for property-based testing (test only)"
                      ],
                      "middleware": [],
                      "shared": [
                        "go.sum lockfile with cryptographic checksums",
                        "Documented process for updating dependencies",
                        "Dependabot or renovate configuration for automated updates"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "ProjectStructure.createGoMod",
                    "related_concepts": [
                      "Go modules",
                      "dependency management",
                      "semantic versioning",
                      "module path",
                      "go.sum"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_009.5",
                    "description": "Implement version injection mechanism using Go LDFLAGS to embed version, commit hash, and build metadata into compiled binaries at build time",
                    "type": "sub_process",
                    "parent_id": "REQ_009",
                    "children": [],
                    "acceptance_criteria": [
                      "Version variable declared in main package: var version string",
                      "Build date variable declared: var buildDate string",
                      "Git commit variable declared: var gitCommit string",
                      "Makefile defines VERSION using git describe --tags --always --dirty",
                      "Makefile defines BUILD_DATE using date -u +%Y-%m-%dT%H:%M:%SZ",
                      "Makefile defines GIT_COMMIT using git rev-parse --short HEAD",
                      "LDFLAGS correctly formats -X main.version=$(VERSION) injection",
                      "LDFLAGS correctly formats -X main.buildDate=$(BUILD_DATE) injection",
                      "LDFLAGS correctly formats -X main.gitCommit=$(GIT_COMMIT) injection",
                      "Built binary outputs correct version with --version flag",
                      "Version output includes version, commit, and build date",
                      "Development builds without tags show 'dev' or commit hash as version",
                      "CGO_ENABLED=0 builds produce static binaries with version info",
                      "Cross-compiled binaries for darwin/linux/windows include correct version"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "cmd/orchestrator/main.go - var version, buildDate, gitCommit = \"dev\", \"unknown\", \"unknown\"",
                        "cmd/loop-runner/main.go - same version variables",
                        "internal/cli/version.go - VersionInfo struct and Print() method",
                        "Makefile VERSION variable: $(shell git describe --tags --always --dirty 2>/dev/null || echo dev)",
                        "Makefile BUILD_DATE variable: $(shell date -u +%Y-%m-%dT%H:%M:%SZ)",
                        "Makefile GIT_COMMIT variable: $(shell git rev-parse --short HEAD 2>/dev/null || echo unknown)",
                        "Makefile LDFLAGS: -ldflags \"-X main.version=$(VERSION) -X main.buildDate=$(BUILD_DATE) -X main.gitCommit=$(GIT_COMMIT)\"",
                        "Makefile build target: go build $(LDFLAGS) -o bin/context-engine ./cmd/orchestrator",
                        "Makefile install target with PREFIX ?= /usr/local",
                        "Makefile release target for cross-compilation with GOOS/GOARCH",
                        "install.sh script for users without make"
                      ],
                      "middleware": [],
                      "shared": [
                        "VersionInfo struct: Version, BuildDate, GitCommit, GoVersion fields",
                        "GetVersionInfo() function returning populated VersionInfo",
                        "Version command/flag handler outputting formatted version string"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "BuildSystem.implementLdflagsVersionInjection",
                    "related_concepts": [
                      "LDFLAGS",
                      "build-time injection",
                      "version embedding",
                      "Makefile",
                      "git describe",
                      "semantic versioning"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_010",
                "description": "The system must handle streaming output from Claude CLI for real-time feedback",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_010.1",
                    "description": "Implement goroutines with channels for async streaming of Claude CLI output, enabling concurrent command execution and real-time output processing",
                    "type": "sub_process",
                    "parent_id": "REQ_010",
                    "children": [],
                    "acceptance_criteria": [
                      "Create a StreamResult struct with fields: Success (bool), Output (string), Error (string), Elapsed (time.Duration)",
                      "Implement goroutine that reads from exec.Cmd stdout pipe and writes to output channel",
                      "Implement separate goroutine for stderr pipe reading to error channel",
                      "Use buffered channels (capacity 100) to prevent blocking on slow consumers",
                      "Implement select statement to multiplex stdout, stderr, and done channels",
                      "Support context.Context for cancellation propagation",
                      "Implement graceful shutdown: drain channels before returning",
                      "Handle channel close semantics: close output channels only from sender goroutine",
                      "Implement wait group for synchronizing multiple reader goroutines",
                      "Support both blocking (synchronous) and non-blocking (callback) consumption modes",
                      "Emit structured JSON events compatible with stream-json format for repomirror",
                      "Measure elapsed time from command start to completion",
                      "Return error if command fails to start (FileNotFoundError equivalent)",
                      "Handle panic recovery in goroutines to prevent process crash"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/runner/stream_manager.go: StreamManager struct with output/error channels",
                        "internal/runner/stream_manager.go: RunWithChannels(ctx context.Context, cmd *exec.Cmd) (<-chan string, <-chan error, error)",
                        "internal/runner/stream_manager.go: CollectOutput(outputChan <-chan string, errorChan <-chan error) StreamResult",
                        "internal/runner/stream_manager.go: StreamCallback type for async consumption: type StreamCallback func(line string, isError bool)",
                        "internal/runner/stream_manager.go: RunWithCallback(ctx context.Context, cmd *exec.Cmd, cb StreamCallback) error"
                      ],
                      "middleware": [],
                      "shared": [
                        "internal/models/stream_result.go: StreamResult struct definition",
                        "internal/models/stream_event.go: StreamEvent struct for JSON events (type, message, content)",
                        "pkg/channels/merge.go: MergeChannels utility for combining multiple output channels"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "StreamManager.RunWithChannels",
                    "related_concepts": [
                      "goroutines",
                      "channels",
                      "select statement",
                      "context cancellation",
                      "buffered channels",
                      "fan-out pattern",
                      "concurrent output processing"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_010.2",
                    "description": "Use io.Pipe for streaming command output, enabling bidirectional pipe communication between subprocess and Go application",
                    "type": "sub_process",
                    "parent_id": "REQ_010",
                    "children": [],
                    "acceptance_criteria": [
                      "Create PipeStreamer struct wrapping exec.Cmd with stdin/stdout/stderr pipes",
                      "Implement io.Pipe() for stdout: returns PipeReader for consuming, PipeWriter connected to cmd.Stdout",
                      "Implement io.Pipe() for stderr: separate pipe for error output",
                      "Support io.TeeReader pattern to both stream and buffer output simultaneously",
                      "Implement Write() method to send input to stdin pipe (for interactive prompts)",
                      "Handle pipe close order: close stdin first, then wait for stdout/stderr to drain",
                      "Implement deadlock prevention: use separate goroutines for reading each pipe",
                      "Support PTY wrapping via 'script' command for Claude CLI compatibility (mimics run_claude_subprocess)",
                      "Implement buffer size configuration (default 4096 bytes per read)",
                      "Handle partial reads: accumulate until newline for line-oriented processing",
                      "Implement EOF detection and clean pipe closure",
                      "Support pipe reset for command retry scenarios",
                      "Test pipe blocking behavior when buffer full",
                      "Emit stream-json events for each complete line of output"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/runner/pipe_streamer.go: PipeStreamer struct with stdinPipe, stdoutPipe, stderrPipe fields",
                        "internal/runner/pipe_streamer.go: NewPipeStreamer(cmd *exec.Cmd) *PipeStreamer",
                        "internal/runner/pipe_streamer.go: Start() error - attach pipes and start command",
                        "internal/runner/pipe_streamer.go: StreamOutput(writer io.Writer) error - copy stdout to writer",
                        "internal/runner/pipe_streamer.go: StreamError(writer io.Writer) error - copy stderr to writer",
                        "internal/runner/pipe_streamer.go: SendInput(input string) error - write to stdin",
                        "internal/runner/pipe_streamer.go: Wait() error - wait for command completion",
                        "internal/runner/pipe_streamer.go: Close() error - close all pipes gracefully",
                        "internal/runner/pty_wrapper.go: WrapWithPTY(cmd []string) *exec.Cmd - wrap command with 'script' for PTY"
                      ],
                      "middleware": [],
                      "shared": [
                        "internal/models/pipe_config.go: PipeConfig struct (BufferSize, LineBased bool)",
                        "pkg/io/line_buffer.go: LineBuffer for accumulating partial reads into complete lines"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "PipeStreamer.StreamOutput",
                    "related_concepts": [
                      "io.Pipe",
                      "io.Reader",
                      "io.Writer",
                      "pipe semantics",
                      "io.Copy",
                      "io.TeeReader",
                      "bytes.Buffer"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_010.3",
                    "description": "Implement bufio.Scanner for line-by-line output reading, enabling efficient parsing of Claude CLI JSON streaming output",
                    "type": "sub_process",
                    "parent_id": "REQ_010",
                    "children": [],
                    "acceptance_criteria": [
                      "Create LineScanner struct wrapping bufio.Scanner for stdout reading",
                      "Use bufio.NewScanner with custom buffer size (64KB for large JSON lines)",
                      "Implement custom SplitFunc for handling partial JSON objects spanning lines",
                      "Parse each line as JSON using json.Decoder for stream-json format",
                      "Handle content_block_delta events: extract text from delta.text field",
                      "Handle assistant events: extract text from message.content[].text",
                      "Handle tool_use events: extract name, input, id for tool call display",
                      "Handle tool_result events: extract tool_use_id, content, is_error",
                      "Handle result events: extract final result text and is_error flag",
                      "Implement Scan() iteration pattern with Err() for error checking",
                      "Support maximum line length configuration (default 1MB)",
                      "Handle scanner.ErrTooLong gracefully: log and skip oversized lines",
                      "Emit formatted terminal output: text content + tool calls with ANSI colors",
                      "Accumulate text_chunks for final output aggregation",
                      "Return structured CommandResult with success, output, error, elapsed fields",
                      "Test with mixed JSON and non-JSON output (script command noise)"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/runner/line_scanner.go: LineScanner struct with scanner *bufio.Scanner, textChunks []string",
                        "internal/runner/line_scanner.go: NewLineScanner(r io.Reader, bufferSize int) *LineScanner",
                        "internal/runner/line_scanner.go: ScanLines() iter.Seq[StreamEvent] - Go 1.23 iterator pattern",
                        "internal/runner/line_scanner.go: ProcessLine(line string) (*StreamEvent, error) - parse JSON line",
                        "internal/runner/line_scanner.go: GetAccumulatedOutput() string - join text chunks",
                        "internal/runner/json_parser.go: ParseStreamEvent(line string) (*StreamEvent, error)",
                        "internal/runner/json_parser.go: ExtractTextContent(event StreamEvent) string",
                        "internal/runner/json_parser.go: ExtractToolCall(event StreamEvent) *ToolCall"
                      ],
                      "middleware": [],
                      "shared": [
                        "internal/models/stream_event.go: StreamEvent union type (ContentBlockDelta, Assistant, ToolUse, ToolResult, Result)",
                        "internal/models/tool_call.go: ToolCall struct (ID, Name, Input map[string]any)",
                        "internal/cli/colors.go: ANSI color constants (Reset, Bold, Dim, Red, Green, Yellow, Blue, Magenta, Cyan)",
                        "internal/cli/format.go: FormatToolCall(name string, input map[string]any) string - formatted display"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "LineScanner.ScanLines",
                    "related_concepts": [
                      "bufio.Scanner",
                      "bufio.ScanLines",
                      "bufio.SplitFunc",
                      "json.Decoder",
                      "streaming JSON parsing",
                      "line-oriented protocols"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_010.4",
                    "description": "Support CommandContext with timeout for long-running Claude CLI operations, providing graceful cancellation and resource cleanup",
                    "type": "sub_process",
                    "parent_id": "REQ_010",
                    "children": [],
                    "acceptance_criteria": [
                      "Create ClaudeRunner struct with configurable timeout (default 1 hour)",
                      "Use exec.CommandContext(ctx, 'claude', args...) for automatic cancellation",
                      "Implement context.WithTimeout for maximum execution duration",
                      "Support context.WithDeadline for absolute deadline scenarios",
                      "Handle context.DeadlineExceeded: return timeout error with partial output",
                      "Handle context.Canceled: return cancellation error gracefully",
                      "Implement graceful shutdown: SIGTERM first, wait 5s, then SIGKILL",
                      "Use cmd.Process.Signal(syscall.SIGTERM) for graceful termination",
                      "Implement process group management: kill child processes on timeout",
                      "Support timeout extension: allow caller to extend timeout mid-execution",
                      "Track elapsed time throughout execution for progress reporting",
                      "Log timeout events with duration and partial output length",
                      "Clean up pipe resources on timeout (close readers/writers)",
                      "Test timeout behavior with different durations (1s, 1m, 1h)",
                      "Emit timeout event in stream-json format for monitoring",
                      "Return CommandResult with success=false, error='Timed out after Xs' on timeout"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/runner/claude_runner.go: ClaudeRunner struct with timeout, model, permissionMode fields",
                        "internal/runner/claude_runner.go: NewClaudeRunner(opts ...ClaudeRunnerOption) *ClaudeRunner",
                        "internal/runner/claude_runner.go: RunWithTimeout(ctx context.Context, prompt string) (*CommandResult, error)",
                        "internal/runner/claude_runner.go: RunStreaming(ctx context.Context, prompt string, callback StreamCallback) error",
                        "internal/runner/claude_runner.go: buildCommand(ctx context.Context, prompt string) *exec.Cmd",
                        "internal/runner/claude_runner.go: handleTimeout(cmd *exec.Cmd, elapsed time.Duration) *CommandResult",
                        "internal/runner/claude_runner.go: gracefulShutdown(cmd *exec.Cmd, gracePeriod time.Duration) error",
                        "internal/runner/options.go: ClaudeRunnerOption functional options pattern",
                        "internal/runner/options.go: WithTimeout(d time.Duration) ClaudeRunnerOption",
                        "internal/runner/options.go: WithModel(model string) ClaudeRunnerOption",
                        "internal/runner/options.go: WithWorkDir(path string) ClaudeRunnerOption"
                      ],
                      "middleware": [],
                      "shared": [
                        "internal/models/command_result.go: CommandResult struct (Success bool, Output string, Error string, Elapsed time.Duration, ReturnCode int)",
                        "pkg/process/signal.go: GracefulKill(pid int, gracePeriod time.Duration) error",
                        "pkg/process/group.go: KillProcessGroup(pgid int) error - kill process and children"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "ClaudeRunner.RunWithTimeout",
                    "related_concepts": [
                      "context.WithTimeout",
                      "context.WithCancel",
                      "context.WithDeadline",
                      "exec.CommandContext",
                      "signal handling",
                      "process termination",
                      "SIGTERM vs SIGKILL",
                      "resource cleanup"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              },
              {
                "id": "REQ_011",
                "description": "The system must implement testing infrastructure using Go testing package and property-based testing",
                "type": "parent",
                "parent_id": null,
                "children": [
                  {
                    "id": "REQ_011.1",
                    "description": "Set up native Go testing package infrastructure for unit tests with table-driven test patterns, test fixtures, and mocking capabilities",
                    "type": "sub_process",
                    "parent_id": "REQ_011",
                    "children": [],
                    "acceptance_criteria": [
                      "Create internal/testing/fixtures/ directory structure mirroring Python conftest.py patterns",
                      "Implement mock BAML types as Go structs: MockImplementationComponents, MockImplementationDetail, MockRequirement, MockResponseMetadata",
                      "Create TestMain() setup functions for global test configuration (equivalent to pytest_configure)",
                      "Implement test helper functions for creating mock Claude SDK responses with JSON output",
                      "Create fixture factory functions: NewMockBAMLInitialExtraction(), NewMockBAMLSubprocessDetails(), NewMockClaudeSDKResponse()",
                      "Set up testing/quick package integration for basic randomized testing",
                      "Configure test markers equivalent to pytest markers: t.Skip() for slow/integration/e2e tests",
                      "Implement sample test data fixtures: SampleResearchOutput(), SamplePlanOutput(), SamplePhaseOutput()",
                      "Create project path helper function returning test project root",
                      "Implement cleanup patterns for test resource management using t.Cleanup()",
                      "Support parallel test execution with t.Parallel() where appropriate",
                      "Create testutil package with common assertion helpers and test utilities"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/testing/fixtures/mock_baml.go - Mock BAML type definitions as Go structs",
                        "internal/testing/fixtures/mock_claude.go - Mock Claude SDK response fixtures",
                        "internal/testing/fixtures/sample_data.go - Sample research, plan, phase output fixtures",
                        "internal/testing/testutil/helpers.go - Common test helper functions",
                        "internal/testing/testutil/assertions.go - Custom assertion helpers",
                        "internal/testing/setup.go - TestMain and global test configuration"
                      ],
                      "middleware": [
                        "Build constraint tags for integration vs unit tests (// +build integration)",
                        "Test timeout configuration via -timeout flag"
                      ],
                      "shared": [
                        "internal/testing/testutil/projectpath.go - ProjectPath() helper function",
                        "internal/testing/testutil/cleanup.go - Cleanup tracking and management utilities"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "TestInfrastructure.setupGoTestingPackage",
                    "related_concepts": [
                      "testing package",
                      "testify",
                      "table-driven tests",
                      "test fixtures",
                      "mocking",
                      "go test"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_011.2",
                    "description": "Integrate gopter or rapid library for property-based testing with strategies for generating RequirementNode, ImplementationComponents, and TestableProperty test data",
                    "type": "sub_process",
                    "parent_id": "REQ_011",
                    "children": [],
                    "acceptance_criteria": [
                      "Evaluate and select between gopter (QuickCheck-style) and rapid (modern API) - document decision criteria",
                      "Implement RequirementID generator strategy producing valid IDs: REQ_XXX, REQ_XXX.Y, REQ_XXX.Y.Z format",
                      "Create ImplementationComponents generator with frontend/backend/middleware/shared string slices",
                      "Implement TestableProperty generator with valid property_type enum values: invariant, round_trip, idempotence, oracle",
                      "Create RequirementNode generator supporting recursive children generation up to configurable depth",
                      "Implement NonWhitespaceText generator equivalent to Python's _non_whitespace_text strategy",
                      "Create composite generators combining multiple strategies for complex data structures",
                      "Implement stateful testing machine for RequirementHierarchy operations (add_requirement, add_child)",
                      "Define invariant checks: unique IDs, parent-child consistency, reasonable hierarchy depth (max 20)",
                      "Create property tests verifying round-trip serialization for all model types",
                      "Implement shrinking support for meaningful failure case minimization",
                      "Configure max_examples equivalent (default 100, configurable per test)",
                      "Support health check suppression for slow property tests"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/testing/proptest/generators.go - All custom generators/strategies",
                        "internal/testing/proptest/requirement_id_gen.go - RequirementID strategy",
                        "internal/testing/proptest/implementation_gen.go - ImplementationComponents generator",
                        "internal/testing/proptest/testable_property_gen.go - TestableProperty generator",
                        "internal/testing/proptest/requirement_node_gen.go - RequirementNode recursive generator",
                        "internal/testing/proptest/hierarchy_state_machine.go - Stateful testing for RequirementHierarchy"
                      ],
                      "middleware": [],
                      "shared": [
                        "internal/testing/proptest/config.go - Property test configuration (max_examples, timeouts)",
                        "internal/testing/proptest/invariants.go - Common invariant check functions"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "PropertyTesting.integrateGopterOrRapid",
                    "related_concepts": [
                      "property-based testing",
                      "gopter",
                      "rapid",
                      "hypothesis strategies",
                      "generators",
                      "shrinking",
                      "stateful testing"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_011.3",
                    "description": "Port existing ~95% test coverage from Python pytest to Go, maintaining equivalent test scenarios and assertions across all tested behaviors",
                    "type": "sub_process",
                    "parent_id": "REQ_011",
                    "children": [],
                    "acceptance_criteria": [
                      "Map pytest assertion patterns to Go testing patterns: assert x == y \u2192 if got != want { t.Errorf(...) }",
                      "Convert pytest.raises(ValueError) to error checking patterns in Go",
                      "Port pytest.fixture to Go setup/teardown patterns with t.Cleanup()",
                      "Map pytest.mark.parametrize to Go table-driven tests",
                      "Convert pytest.mark.slow/integration/e2e to Go build tags or t.Skip() patterns",
                      "Port unittest.mock.patch to interface-based mocking or gomock",
                      "Preserve test class organization as test function groupings with consistent naming",
                      "Maintain test isolation - each test should be independent and idempotent",
                      "Implement coverage measurement with go test -cover achieving \u226595% coverage",
                      "Port capsys output capture to bytes.Buffer for stdout/stderr testing",
                      "Convert monkeypatch.setattr to dependency injection patterns",
                      "Map hypothesis @given decorators to gopter/rapid ForAll patterns",
                      "Port stateful testing (RuleBasedStateMachine) to gopter commands pattern",
                      "Verify all ported tests pass with equivalent behavior to Python originals"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "Test migration scripts documenting pytest-to-go patterns",
                        "Coverage report generation and comparison tooling",
                        "Test result comparison utilities between Python and Go runs"
                      ],
                      "middleware": [
                        "CI integration for coverage enforcement (go test -coverprofile=coverage.out)",
                        "Coverage threshold validation in build pipeline"
                      ],
                      "shared": [
                        "Test pattern mapping documentation (pytest \u2192 Go equivalents)",
                        "Assertion helper library for common test patterns"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "TestMigration.portPytestCoverage",
                    "related_concepts": [
                      "test migration",
                      "coverage",
                      "behavior preservation",
                      "pytest to go test",
                      "assertion mapping"
                    ],
                    "category": "functional"
                  },
                  {
                    "id": "REQ_011.4",
                    "description": "Port all 18 test files from planning_pipeline/tests/ to Go with full behavioral equivalence",
                    "type": "sub_process",
                    "parent_id": "REQ_011",
                    "children": [],
                    "acceptance_criteria": [
                      "Port test_models.py (1009 lines): RequirementNode, RequirementHierarchy, ImplementationComponents property tests \u2192 internal/models/models_test.go",
                      "Port test_property_generator.py (537 lines): PropertyType, derive_properties, generate_test_skeleton tests \u2192 internal/pipeline/property_generator_test.go",
                      "Port test_pipeline.py (344 lines): PlanningPipeline initialization, step ordering, failure handling \u2192 internal/pipeline/pipeline_test.go",
                      "Port test_steps.py (136 lines): step_research, step_planning, step_phase_decomposition, step_beads_integration \u2192 internal/pipeline/steps_test.go",
                      "Port test_decomposition.py: Requirement decomposition via Claude SDK tests \u2192 internal/pipeline/decomposition_test.go",
                      "Port test_step_decomposition.py: Step wrapper for decomposition tests \u2192 internal/pipeline/step_decomposition_test.go",
                      "Port test_context_generation.py: Tech stack detection, file grouping tests \u2192 internal/pipeline/context_generation_test.go",
                      "Port test_claude.py: Claude SDK wrapper tests \u2192 internal/runner/claude_test.go",
                      "Port test_beads_controller.py: Python wrapper for beads CLI tests \u2192 pkg/beads/client_test.go",
                      "Port test_integrated_orchestrator.py: Beads + Claude integration tests \u2192 internal/app/orchestrator_test.go",
                      "Port test_checkpoint_manager.py: Checkpoint persistence/recovery tests \u2192 internal/pipeline/checkpoint_test.go",
                      "Port test_checkpoints.py: Interactive checkpoint function tests \u2192 internal/pipeline/checkpoints_test.go",
                      "Port test_visualization.py: Mermaid diagram generation tests \u2192 internal/pipeline/visualization_test.go",
                      "Port test_helpers.py: Utility function tests \u2192 internal/cli/helpers_test.go",
                      "Port test_orchestrator.py: Main orchestrator tests \u2192 internal/app/orchestrator_test.go",
                      "Port test_decomposition_e2e.py: E2E decomposition tests \u2192 internal/pipeline/decomposition_e2e_test.go (build tag: e2e)",
                      "Port test_phase_execution.py: Phase execution tests \u2192 internal/pipeline/phase_execution_test.go",
                      "Port conftest.py fixtures: All fixtures to internal/testing/fixtures/",
                      "Ensure all property-based tests from test_models.py are ported with equivalent generators",
                      "Verify stateful tests (RequirementHierarchyStateMachine) work correctly in Go"
                    ],
                    "implementation": {
                      "frontend": [],
                      "backend": [
                        "internal/models/models_test.go - All model tests including property-based tests",
                        "internal/models/implementation_components_test.go - ImplementationComponents property tests",
                        "internal/models/testable_property_test.go - TestableProperty tests",
                        "internal/models/requirement_node_test.go - RequirementNode tests including function_id, related_concepts, category",
                        "internal/models/requirement_hierarchy_test.go - RequirementHierarchy tests including stateful testing",
                        "internal/models/arbitrary_depth_test.go - Arbitrary depth ID generation tests",
                        "internal/pipeline/property_generator_test.go - PropertyType, derive_properties, generate_test_skeleton tests",
                        "internal/pipeline/pipeline_test.go - PlanningPipeline tests",
                        "internal/pipeline/steps_test.go - All step function tests",
                        "internal/pipeline/decomposition_test.go - Requirement decomposition tests",
                        "internal/pipeline/context_generation_test.go - Context generation tests",
                        "internal/pipeline/checkpoint_test.go - Checkpoint management tests",
                        "internal/pipeline/visualization_test.go - Mermaid visualization tests",
                        "internal/runner/claude_test.go - Claude runner tests",
                        "pkg/beads/client_test.go - Beads controller tests",
                        "internal/app/orchestrator_test.go - Main orchestrator tests",
                        "internal/cli/helpers_test.go - CLI helper tests"
                      ],
                      "middleware": [
                        "Build tags for test categorization: unit, integration, e2e, slow",
                        "Test data files in testdata/ directories"
                      ],
                      "shared": [
                        "internal/testing/fixtures/conftest.go - All conftest.py fixtures ported",
                        "internal/testing/testdata/ - Sample data files for tests"
                      ]
                    },
                    "testable_properties": [],
                    "function_id": "TestMigration.portPlanningPipelineTests",
                    "related_concepts": [
                      "test file migration",
                      "planning pipeline",
                      "integration tests",
                      "unit tests",
                      "e2e tests"
                    ],
                    "category": "functional"
                  }
                ],
                "acceptance_criteria": [],
                "implementation": null,
                "testable_properties": [],
                "function_id": null,
                "related_concepts": [],
                "category": "functional"
              }
            ],
            "metadata": {
              "source": "agent_sdk_decomposition",
              "research_length": 23346,
              "decomposition_stats": {
                "requirements_found": 12,
                "subprocesses_expanded": 58,
                "total_nodes": 70,
                "extraction_time_ms": 36909,
                "expansion_time_ms": 983633
              }
            }
          },
          "requirements_count": 12,
          "total_nodes": 70,
          "research_path": "/home/maceo/Dev/silmari-Context-Engine/thoughts/searchable/research/2026-01-05-python-to-go-port-research.md",
          "user_action": "continue"
        }
      }
    },
    "context_entry_ids": {
      "research": [
        "research_0001"
      ],
      "decomposition": [
        "req_0002",
        "req_0003",
        "req_0004",
        "req_0005",
        "req_0006",
        "req_0007",
        "req_0008",
        "req_0009",
        "req_0010",
        "req_0011",
        "req_0012",
        "req_0013",
        "req_0014",
        "req_0015",
        "req_0016",
        "req_0017",
        "req_0018",
        "req_0019",
        "req_0020",
        "req_0021",
        "req_0022",
        "req_0023",
        "req_0024",
        "req_0025",
        "req_0026",
        "req_0027",
        "req_0028",
        "req_0029",
        "req_0030",
        "req_0031",
        "req_0032",
        "req_0033",
        "req_0034",
        "req_0035",
        "req_0036",
        "req_0037",
        "req_0038",
        "req_0039",
        "req_0040",
        "req_0041",
        "req_0042",
        "req_0043",
        "req_0044",
        "req_0045",
        "req_0046",
        "req_0047",
        "req_0048",
        "req_0049",
        "req_0050",
        "req_0051",
        "req_0052",
        "req_0053",
        "req_0054",
        "req_0055",
        "req_0056",
        "req_0057",
        "req_0058",
        "req_0059",
        "req_0060",
        "req_0061",
        "req_0062",
        "req_0063",
        "req_0064",
        "req_0065",
        "req_0066",
        "req_0067",
        "req_0068",
        "req_0069",
        "req_0070",
        "req_0071"
      ]
    },
    "started_at": "2026-01-05T15:47:53.417316",
    "checkpoint_id": null,
    "beads_epic_id": null,
    "metadata": {}
  },
  "errors": [],
  "git_commit": "6eb7deebad4a7d99fdfa9beea8a6040bd86e4ed3"
}